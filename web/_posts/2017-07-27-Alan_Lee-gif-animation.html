---
author: "Alan Lee"
title: "建立 GIF 動畫檔案 animation 套件"
tags: ['animation', 'gif', 'tutorials', 'visualization']
link: "http://rwepa.blogspot.com/2017/07/gif-animation.html"
---

animation 套件可以建立動畫檔案, 例: GIF 等檔案, 本篇文章說明使用方法.<br /><div><br /></div><h2>下載 ImageMagick 軟體</h2><div>下載位置&nbsp;<a href="https://www.imagemagick.org/script/download.php" target="_blank">https://www.imagemagick.org/script/download.php</a>&nbsp;, 下載網頁包括&nbsp;Unix Binary Release,&nbsp;Mac OS X Binary Release,&nbsp;iOS Binary Release 以及&nbsp;Windows Binary Release, 在 Windows 版本中直接選取 "mageMagick-7.0.6-3-Q16-x64-dll.exe" 下載即可.</div><div><br /></div><div class="separator" style="clear: both; text-align: left;"><a href="https://4.bp.blogspot.com/-Cs7klfKWiEw/WXnm_cnsWRI/AAAAAAAALxQ/4N8Oneom_c8gmwzZHR3kfSeor-hBdYzsgCLcBGAs/s1600/ImageMagick.download.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="1257" data-original-width="1480" height="338" src="https://4.bp.blogspot.com/-Cs7klfKWiEw/WXnm_cnsWRI/AAAAAAAALxQ/4N8Oneom_c8gmwzZHR3kfSeor-hBdYzsgCLcBGAs/s400/ImageMagick.download.png" width="400" /></a></div><div><br /></div><h2>安裝 ImageMagick 軟體</h2><div>ImageMagick安裝過程中, 因為 animation 套件須使用 convert 等方法, 因此在 [Select Additional Tasks] 視窗中記得要勾選 Install legacy utilities(e.g. convert), 按 Next 完成安裝.</div><div><br /></div><div class="separator" style="clear: both; text-align: left;"><a href="https://1.bp.blogspot.com/-HzNdr9udq8A/WXnnuKH4SYI/AAAAAAAALxU/__qjQC8DfSwXL6UtFy7mhQ8_BMY5lqD6QCLcBGAs/s1600/ImageMagick.install.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="742" data-original-width="998" height="296" src="https://1.bp.blogspot.com/-HzNdr9udq8A/WXnnuKH4SYI/AAAAAAAALxU/__qjQC8DfSwXL6UtFy7mhQ8_BMY5lqD6QCLcBGAs/s400/ImageMagick.install.png" width="400" /></a></div><div><br /></div><div><br /></div><h2>安裝 animation 套件</h2><div>install.packages("animation")</div><div><br /></div><div><h2>範例1</h2></div><div>將要繪圖的函數建立在 saveGIF( ) 函數之中. movie.name 參數可設定匯出GIF檔案名稱.</div><div><br /></div><div><br /><pre><code class="language-r line-numbers"># install.packages("animation")<br />library(animation)<br /><br /># example 1<br />saveGIF({<br />  for (i in 1:10) plot(runif(10), ylim = 0:1, col=i)<br />},  movie.name = "animation_runif.gif")<br /></code></pre><br /><div class="separator" style="clear: both; text-align: left;"><a href="https://1.bp.blogspot.com/-HsZGmpE5S38/WXn983J5ShI/AAAAAAAALxk/PI_nzFu77s886oeSHZQiUkDPZlz7N-ytwCLcBGAs/s1600/animation_runif.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="480" data-original-width="480" height="320" src="https://1.bp.blogspot.com/-HsZGmpE5S38/WXn983J5ShI/AAAAAAAALxk/PI_nzFu77s886oeSHZQiUkDPZlz7N-ytwCLcBGAs/s320/animation_runif.gif" width="320" /></a></div><br /><br /></div><div><h2>範例2</h2></div><div><br /><pre><code class="language-r line-numbers"># example 2<br /># reference: http://www.programmingr.com/content/animations-r/<br /><br /># Set delay between frames when replaying<br />ani.options(interval=.05)<br /><br /># Set up a vector of colors for use below <br />col.range &lt;- heat.colors(15)<br /><br /># Begin animation loop<br /># Note the brackets within the parentheses<br />saveGIF({<br /> <br /> # For the most part, it’s safest to start with graphical settings in <br /> # the animation loop, as the loop adds a layer of complexity to <br /> # manipulating the graphs. For example, the layout specification needs to <br /> # be within animation loop to work properly.<br /> layout(matrix(c(1, rep(2, 5)), 6, 1))<br /> <br /> # Adjust the margins a little<br /> par(mar=c(4,4,2,1) + 0.1)<br /> <br /> # Begin the loop that creates the 150 individual graphs<br /> for (i in 1:150) {<br /> <br /> # Pull 100 observations from a normal distribution<br /> # and add a constant based on the iteration to move the distribution<br /> chunk &lt;- rnorm(100)+sqrt(abs((i)-51))<br /> <br /> # Reset the color of the top chart every time (so that it doesn’t change as the <br /> # bottom chart changes)<br /> par(fg=1)<br /> <br /> # Set up the top chart that keeps track of the current frame/iteration<br /> # Dress it up a little just for fun<br /> plot(-5, xlim = c(1,150), ylim = c(0, .3), axes = F, xlab = "", ylab = "", main = "Iteration demo")<br /> abline(v=i, lwd=5, col = rgb(0, 0, 255, 255, maxColorValue=255))<br /> abline(v=i-1, lwd=5, col = rgb(0, 0, 255, 50, maxColorValue=255))<br /> abline(v=i-2, lwd=5, col = rgb(0, 0, 255, 25, maxColorValue=255))<br /> <br /> # Bring back the X axis<br /> axis(1)<br /> <br /> # Set the color of the bottom chart based on the distance of the distribution’s mean from 0<br /> par(fg = col.range[mean(chunk)+3])<br /> <br /> # Set up the bottom chart<br /> plot(density(chunk), main = "", xlab = "X Value", xlim = c(-5, 15), ylim = c(0, .6))<br /> <br /> # Add a line that indicates the mean of the distribution. Add additional lines to track<br /> # previous means<br /> abline(v=mean(chunk), col = rgb(255, 0, 0, 255, maxColorValue=255))<br /> if (exists("lastmean")) {abline(v=lastmean, col = rgb(255, 0, 0, 50, maxColorValue=255)); prevlastmean &lt;- lastmean;}<br /> if (exists("prevlastmean")) {abline(v=prevlastmean, col = rgb(255, 0, 0, 25, maxColorValue=255))}<br /> #Fix last mean calculation<br /> lastmean &lt;- mean(chunk)<br /> }<br />}, movie.name = "animation_iteration.gif")</code></pre><br /><div class="separator" style="clear: both; text-align: left;"><a href="https://3.bp.blogspot.com/-khZFRPc8JfA/WXoEN1T0cxI/AAAAAAAALxw/NOJIHfQCF64_c6OrnLeofiu6kBh0qIw6wCLcBGAs/s1600/animation_iteration.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="480" data-original-width="480" height="320" src="https://3.bp.blogspot.com/-khZFRPc8JfA/WXoEN1T0cxI/AAAAAAAALxw/NOJIHfQCF64_c6OrnLeofiu6kBh0qIw6wCLcBGAs/s320/animation_iteration.gif" width="320" /></a></div><br /># end</div>