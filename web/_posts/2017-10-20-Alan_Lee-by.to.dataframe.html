---
author: "Alan Lee"
title: "by + scale 資料物件轉換為資料框並與原始資料合併"
tags: ['by', 'cbind', 'data.frame', 'rbind', 'scale']
link: "http://rwepa.blogspot.com/2017/10/by.to.dataframe.html"
---

<div class="separator" style="clear: both; text-align: left;"></div><div class="separator" style="clear: both; text-align: left;"><a href="https://1.bp.blogspot.com/-WFJSUeiqnV8/Wel1gKV4azI/AAAAAAAAMCk/FQmse32a48gfP6G-tTLBK255KLEwT5HJACLcBGAs/s1600/scale.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="537" data-original-width="1175" height="182" src="https://1.bp.blogspot.com/-WFJSUeiqnV8/Wel1gKV4azI/AAAAAAAAMCk/FQmse32a48gfP6G-tTLBK255KLEwT5HJACLcBGAs/s400/scale.png" width="400" /></a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div><span style="background-color: white; color: #222222; font-family: &quot;arial&quot; , &quot;tahoma&quot; , &quot;helvetica&quot; , &quot;freesans&quot; , sans-serif; font-size: 13.2px;"></span><br /><h3 style="background-color: white; color: #222222; font-family: arial, tahoma, helvetica, freesans, sans-serif; margin: 0px; position: relative;">關鍵字:</h3><div><ul><li>scale 資料標準化</li><li>by 依群組計算</li><li>rbind 列合併</li><li>do.call 執行R函數</li><li>cbind 行合併</li></ul></div><br style="background-color: white; color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13.2px;" /><h3 style="background-color: white; color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; margin: 0px; position: relative;">分析:</h3><ul style="background-color: white; color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13.2px; line-height: 1.4; margin: 0.5em 0px; padding: 0px 2.5em;"><li style="margin: 0px 0px 0.25em; padding: 0px;"><span style="font-family: &quot;arial&quot; , &quot;tahoma&quot; , &quot;helvetica&quot; , &quot;freesans&quot; , sans-serif;">by 函數:提供不同群組資料執行計算.&nbsp;</span>by 的結果為 list, 使用 as.data.frame 會有錯誤, 此時改用 data.frame(do.call("rbind" , x)) 即可解決此問題.&nbsp;</li><li style="margin: 0px 0px 0.25em; padding: 0px;"><span style="font-family: &quot;arial&quot; , &quot;tahoma&quot; , &quot;helvetica&quot; , &quot;freesans&quot; , sans-serif;">scale 函數: 將資料值進行標準化轉換, (x - u)/s, u:平均值, s:標準差.</span></li><li style="margin: 0px 0px 0.25em; padding: 0px;">rbind&nbsp;<span style="font-size: 13.2px;">函數</span>是上/下資料的列結合.</li><li style="margin: 0px 0px 0.25em; padding: 0px;">cbind 函數是左右資料的行結合.</li></ul><div><a href="https://2.bp.blogspot.com/-Kp2oIK2bloQ/WelfiY3g7HI/AAAAAAAAMCE/Z7PfT2riv8w4OMsHT5YwQ9RQKJCBfim_gCLcBGAs/s1600/by_to_data.frame.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em; text-align: center;"><img border="0" data-original-height="315" data-original-width="1600" height="76" src="https://2.bp.blogspot.com/-Kp2oIK2bloQ/WelfiY3g7HI/AAAAAAAAMCE/Z7PfT2riv8w4OMsHT5YwQ9RQKJCBfim_gCLcBGAs/s400/by_to_data.frame.png" width="400" /></a></div><div><br /></div><div><span style="color: #222222; font-family: &quot;arial&quot; , &quot;tahoma&quot; , &quot;helvetica&quot; , &quot;freesans&quot; , sans-serif;"><span style="font-size: 13.2px;"><br /></span></span></div></div><div><h3 style="background-color: white; clear: both; color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; margin: 0px; position: relative;">R程式解說:</h3><ul style="background-color: white; color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13.2px; line-height: 1.4; margin: 0.5em 0px; padding: 0px 2.5em;"><li style="margin: 0px 0px 0.25em; padding: 0px;">[#1] 先將 by的結果儲存成資料物件x.</li><li style="margin: 0px 0px 0.25em; padding: 0px;">[#2] 使用 data.frame, do.call, rbind 將by結果合併.</li><li style="margin: 0px 0px 0.25em; padding: 0px;">[#3] 使用 cbind 將by 結果與原有資料物件進行行合併.</li><li style="margin: 0px 0px 0.25em; padding: 0px;">[#4] head 函數預設顯示前6筆資料.</li></ul><div><span style="color: #222222; font-family: &quot;arial&quot; , &quot;tahoma&quot; , &quot;helvetica&quot; , &quot;freesans&quot; , sans-serif;"><span style="font-size: 13.2px;"><br /></span></span></div></div><div><h3 style="background-color: white; color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; margin: 0px; position: relative;">R程式:</h3></div><div><pre><code class="language-r line-numbers">x &lt;- by(iris[-5], iris$Species, scale) # list<br />tmp &lt;- data.frame(do.call("rbind", x))<br />iris.scale &lt;- cbind(iris, tmp)<br />head(iris.scale)<br /># end</code></pre></div><div><br /></div><br /><br />