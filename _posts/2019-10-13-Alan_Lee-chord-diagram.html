---
author: "Alan Lee"
title: "資料視覺化於相關性分析-弦圖 (Chord Diagram)"
tags: ['chord', 'graphics', 'Rtools', 'visualization', 'web']
link: "http://rwepa.blogspot.com/2019/10/chord-diagram.html"
highlight: true
---

本篇文章介紹 R 軟體在大量資料的相關性資料視覺化應用, 大量數值資料結果有時不易看出資料的樣式 (Patterns), 此時可使用弦圖以建立視覺化結果.<br />弦圖 (Chord Diagram, Chordal Graph) 參考:&nbsp;<a href="https://en.wikipedia.org/wiki/Chordal_graph" target="_blank">https://en.wikipedia.org/wiki/Chordal_graph</a><br /><br /><div class="separator" style="clear: both; text-align: left;"><a href="https://1.bp.blogspot.com/-r9vQUiUiAgw/XaNK20cxyQI/AAAAAAAAZ5E/nzn31pYUZgoM1EJ8GPoBcsfxxod-CvpQgCLcBGAsYHQ/s1600/chord_plot.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="495" data-original-width="500" height="395" src="https://1.bp.blogspot.com/-r9vQUiUiAgw/XaNK20cxyQI/AAAAAAAAZ5E/nzn31pYUZgoM1EJ8GPoBcsfxxod-CvpQgCLcBGAsYHQ/s400/chord_plot.png" width="400" /></a></div><br /><br />說明:<br /><br />1. Windows 系統中, 先安裝 Rtools 編譯工具, 此工具可以下載並安裝相關套件.<br /><br /><ul><li>連結至 Rtools 網站, 例如:&nbsp;<a href="http://cran.csie.ntu.edu.tw/bin/windows/Rtools/" target="_blank">http://cran.csie.ntu.edu.tw/bin/windows/Rtools/</a></li><li>下載最新版本 Rtools35.exe (約104MB)</li><li>安裝 Rtools 軟體, 全部採用預設值安裝, <br />例: 安裝目錄為 <span style="color: red;">C:\Rtools</span><br />例: <span style="font-size: large;">□</span><span style="color: red;">Add rtools to system PATH </span>選項記得打勾</li></ul><br />2. 安裝&nbsp;devtools 套件, 使用&nbsp;<span style="color: red;">install.packages("devtools")</span><br /><span style="color: red;"><br /></span>3. 安裝 chorddiag 套件進行弦圖資料視覺化, 此套件非 CRAN 標準套件, 可使用 devtools 套件中的 install_github 函數進行套件之安裝.<br /><br />安裝指令&nbsp;<span style="color: red;">devtools::install_github("mattflor/chorddiag")</span><br /><br />參考網站:&nbsp;<a href="https://github.com/mattflor/chorddiag" target="_blank">https://github.com/mattflor/chorddiag</a><br /><br />套件使用時, 輸入資料必須採用矩陣資料 (matrix), 且行與列的個數須相同.<br /><br />繪製弦圖函數為 chorddiag.<br /><br />R程式碼:<br /><br /><span style="font-family: Courier New, Courier, monospace;"># title: chord diagram</span><br /><span style="font-family: Courier New, Courier, monospace;"># date: 2019.10.13</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Courier New, Courier, monospace;"># 安裝 Windows 版本 Rtools</span><br /><span style="font-family: Courier New, Courier, monospace;"># http://cran.csie.ntu.edu.tw/bin/windows/Rtools/</span><br /><span style="font-family: Courier New, Courier, monospace;"># 安裝時, Add rtools to system PATH&nbsp;</span><span style="font-family: &quot;Courier New&quot;, Courier, monospace;">記得打勾</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Courier New, Courier, monospace;"># 安裝 devtools 套件</span><br /><span style="background-color: #eeeeee; font-family: Courier New, Courier, monospace;">install.packages("devtools")</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Courier New, Courier, monospace;"># 安裝 chorddiag 套件</span><br /><span style="background-color: #eeeeee; font-family: Courier New, Courier, monospace;">devtools::install_github("mattflor/chorddiag")</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Courier New, Courier, monospace;"># 載入套件</span><br /><span style="background-color: #eeeeee; font-family: Courier New, Courier, monospace;">library(chorddiag)</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Courier New, Courier, monospace;"># 建立資料</span><br /><span style="background-color: #eeeeee; font-family: Courier New, Courier, monospace;">students &lt;- as.matrix(data.frame(</span><br /><span style="background-color: #eeeeee; font-family: Courier New, Courier, monospace;">&nbsp; 文學 = c(68, 75, 65, 97),</span><br /><span style="background-color: #eeeeee; font-family: Courier New, Courier, monospace;">&nbsp; 通識 = c(96, 75, 85, 60),</span><br /><span style="background-color: #eeeeee; font-family: Courier New, Courier, monospace;">&nbsp; 數學 = c(65, 61, 70, 80),</span><br /><span style="background-color: #eeeeee; font-family: Courier New, Courier, monospace;">&nbsp; 體育 = c(66, 79, 85, 61)))</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="background-color: #eeeeee; font-family: Courier New, Courier, monospace;">row.names(students) &lt;- c("班級A", "班級B", "班級C", "班級D")</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Courier New, Courier, monospace;"># 繪製弦圖</span><br /><span style="background-color: #eeeeee; font-family: Courier New, Courier, monospace;">chorddiag(students)</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Courier New, Courier, monospace;"># 視覺化進階優化1</span><br /><span style="background-color: #eeeeee; font-family: Courier New, Courier, monospace;">chorddiag(students, type = "bipartite")</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Courier New, Courier, monospace;"># 視覺化進階優化2</span><br /><span style="background-color: #eeeeee; font-family: Courier New, Courier, monospace;">chorddiag(students, type = "bipartite", showTicks = FALSE)</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Courier New, Courier, monospace;"># 視覺化進階優化3</span><br /><span style="background-color: #eeeeee; font-family: Courier New, Courier, monospace;">chorddiag(students, type = "bipartite", showTicks = FALSE, groupnameFontsize = 14, groupnamePadding = 10, margin = 90)</span><br /><span style="font-family: Courier New, Courier, monospace;"># end</span>