---
author: "Steve Chen"
title: "R軟體中文數字轉換"
tags: 
link: "https://steve-chen.tw/?p=999"
highlight: true
---

<p>最近在處理政府房地產實價登錄資料時，發現「樓層」相關的欄位是以中文數字型態紀錄，例如「十層」、「二十層」、「十五層」等等。<!--more-->上網找了一下，並沒有看到有把中文數字轉成阿拉伯數字的 R 程式，所以我就自己寫了一個。</p>
<p><span id="more-999"></span></p>
<p>&gt; head(floor)<br />
[1] &#8220;二十二層&#8221; &#8220;五層&#8221; &#8220;二十八層&#8221; &#8220;二十二層&#8221; &#8220;三層&#8221; &#8220;十六層&#8221;<br />
&gt; tail(floor)<br />
[1] &#8220;二十四層&#8221; &#8220;十一層&#8221; &#8220;層&#8221; &#8220;十五層&#8221; &#8220;十五層&#8221; &#8220;七層&#8221;<br />
&gt; length(floor)<br />
[1] 1959<br />
&gt; floor = gsub(&#8220;層&#8221;,&#8221;&#8221;,floor)<br />
&gt; head(floor)<br />
[1] &#8220;二十二&#8221; &#8220;五&#8221; &#8220;二十八&#8221; &#8220;二十二&#8221; &#8220;三&#8221; &#8220;十六&#8221;</p>
<p>&gt; cN = c(&#8220;一&#8221;,&#8221;二&#8221;,&#8221;三&#8221;,&#8221;四&#8221;,&#8221;五&#8221;,&#8221;六&#8221;,&#8221;七&#8221;,&#8221;八&#8221;,&#8221;九&#8221;,&#8221;十&#8221;)<br />
&gt; eN1 = as.character(1:10)<br />
&gt;<br />
&gt; names(eN1)=cN<br />
&gt; eN2a = eN2b = eN3 = eN1<br />
&gt; eN2a[10] = &#8220;1&#8221;<br />
&gt; eN2b[10]=&#8221;0&#8243;<br />
&gt; eN3[10]=&#8221;&#8221;</p>
<p>&gt; eN1<br />
一 二 三 四 五 六 七 八 九 十<br />
&#8220;1&#8221; &#8220;2&#8221; &#8220;3&#8221; &#8220;4&#8221; &#8220;5&#8221; &#8220;6&#8221; &#8220;7&#8221; &#8220;8&#8221; &#8220;9&#8221; &#8220;10&#8221;<br />
&gt; eN2a<br />
一 二 三 四 五 六 七 八 九 十<br />
&#8220;1&#8221; &#8220;2&#8221; &#8220;3&#8221; &#8220;4&#8221; &#8220;5&#8221; &#8220;6&#8221; &#8220;7&#8221; &#8220;8&#8221; &#8220;9&#8221; &#8220;1&#8221;<br />
&gt; eN2b<br />
一 二 三 四 五 六 七 八 九 十<br />
&#8220;1&#8221; &#8220;2&#8221; &#8220;3&#8221; &#8220;4&#8221; &#8220;5&#8221; &#8220;6&#8221; &#8220;7&#8221; &#8220;8&#8221; &#8220;9&#8221; &#8220;0&#8221;<br />
&gt; eN3<br />
一 二 三 四 五 六 七 八 九 十<br />
&#8220;1&#8221; &#8220;2&#8221; &#8220;3&#8221; &#8220;4&#8221; &#8220;5&#8221; &#8220;6&#8221; &#8220;7&#8221; &#8220;8&#8221; &#8220;9&#8221; &#8220;&#8221;</p>
<p>library(mgsub)</p>
<p>library(stringr)</p>
<p>floor2 = NULL<br />
for (x in floor)<br />
{<br />
m = str_length(x)<br />
if (m == 1)<br />
out = as.numeric(eN1[x])<br />
else if (m == 2)<br />
{<br />
if (grepl(&#8220;^十&#8221;,x))<br />
out = as.numeric(mgsub(x, cN, eN2a))<br />
else<br />
out = as.numeric(mgsub(x, cN, eN2b))<br />
} else {<br />
out = as.numeric(mgsub(x, cN, eN3))<br />
}<br />
floor2 = c(floor2,out)<br />
}</p>
<p>&gt; head(floor)<br />
[1] &#8220;二十二&#8221; &#8220;五&#8221; &#8220;二十八&#8221; &#8220;二十二&#8221; &#8220;三&#8221; &#8220;十六&#8221;<br />
&gt; head(floor2)<br />
[1] 22 5 28 22 3 16<br />
&gt; tail(floor)<br />
[1] &#8220;二十四&#8221; &#8220;十一&#8221; &#8220;&#8221; &#8220;十五&#8221; &#8220;十五&#8221; &#8220;七&#8221;<br />
&gt; tail(floor2)<br />
[1] 24 11 NA 15 15 7</p>