{"author": "Steve Chen", "id": ["http://steve-chen.tw/?p=1038", "http://steve-chen.tw/?p=822", "http://steve-chen.tw/?p=953", "http://steve-chen.tw/?p=931", "http://steve-chen.tw/?p=999", "http://steve-chen.tw/?p=982", "http://steve-chen.tw/?p=975", "http://steve-chen.tw/?p=907", "http://steve-chen.tw/?p=887", "http://steve-chen.tw/?p=960"], "rblog_url": ["2019/01/08/Steve_Chen-1038.html", "2017/06/04/Steve_Chen-822.html", "2018/06/07/Steve_Chen-953.html", "2018/04/11/Steve_Chen-931.html", "2018/08/08/Steve_Chen-999.html", "2018/06/28/Steve_Chen-982.html", "2018/06/22/Steve_Chen-975.html", "2018/01/13/Steve_Chen-907.html", "2017/12/18/Steve_Chen-887.html", "2018/06/13/Steve_Chen-960.html"], "date": ["2019-01-08", "2017-06-04", "2018-06-07", "2018-04-11", "2018-08-08", "2018-06-28", "2018-06-22", "2018-01-13", "2017-12-18", "2018-06-13"], "tags": [["Text Mining"], ["Learning"], [""], [""], [""], [""], [""], [""], ["Learning"], [""]], "title": ["\u4f7f\u7528 pdftools \u5957\u4ef6\u64f7\u53d6\u53f0\u7063\u5404\u7e23\u5e02\u660e\u65e5\u767d\u5929\u96e8\u91cf", "\u70ba\u4ec0\u9ebc\u6211\u5011\u770b\u4e0d\u61c2\u5225\u4eba\u5beb\u7684 R \u7a0b\u5f0f\uff1f", "R + sparkR : Windows 7 \u5b89\u88dd\u7b46\u8a18", "\u95dc\u65bc\u300cR\u8edf\u9ad4\uff1a\u61c9\u7528\u7d71\u8a08\u65b9\u6cd5\u300d\u6642\u9593\u6578\u5217\u7a0b\u5f0f\u932f\u8aa4", "R\u8edf\u9ad4\u4e2d\u6587\u6578\u5b57\u8f49\u63db", "R \u8edf\u9ad4 sqldf \u5957\u4ef6\uff1aINSERT, UPDATE, CREATE TABLE AS SELECT", "R Windows \u7248 + ITRI \u6587\u5b57\u8a9e\u97f3\u670d\u52d9: Text to Speech", "R\u8edf\u9ad4 svSocket Server + PHP Socket Client", "R: tryCatch \u7c21\u55ae\u7bc4\u4f8b", "R \u8ff4\u5708 List, Vector \u8a18\u61b6\u9ad4\u9810\u5206\u914d\u7684\u8003\u91cf"], "content": ["<p>\u4ee5\u4e0b R \u7a0b\u5f0f\u78bc\u6703\u5148\u5f9e\u4e2d\u592e\u6c23\u8c61\u5c40\u7db2\u7ad9\u64f7\u53d6\u5404\u7e23\u5e02\u660e\u65e5\u767d\u5929\u96e8\u91cf pdf \u6a94\uff0c\u8f49\u6210 text \u6587\u5b57\u6a94\uff0c\u518d\u64f7\u53d6\u51fa\u5404\u7e23\u5e02\u76f8\u5c0d\u7684\u96e8\u91cf (%)\u3002</p>\n<p>\u4f5c\u696d\u7cfb\u7d71\uff1aWindows 7<br />\nR \u7248\u672c\uff1aR-3.5.1</p>\n<p><span id=\"more-1038\"></span></p>\n<p><code># get rainfall for tomorrow daytime</code><br />\n<code> require(pdftools)</code><br />\n<code> require(BBmisc) # use \"suppressAll\" function</code><br />\n<code> require(stringr)</code></p>\n<p><code>download.file(\"https://www.cwb.gov.tw/V7/forecast/taiwan/Data/W03.pdf\",</code><br />\n<code> \"d:/tmp/rains.pdf\")</code></p>\n<p><code>text = suppressAll(pdf_text(\"d:/tmp/rains.pdf\"),immediate.=T)</code><br />\n<code> text = unlist(strsplit(text,\"\\r\\n\"))</code><br />\n<code> text = text[grepl(\"^\uff0a\",text)]</code></p>\n<p><code>citiesTW1 = c(\"\u53f0\u5317\u5e02\",\"\uf5b0\u5317\u5e02\",\"\u6843\u5712\u5e02\",\"\u53f0\u4e2d\u5e02\",\"\u53f0\u5357\u5e02\",</code><br />\n<code> \"\u9ad8\u96c4\u5e02\",\"\u57fa\u9686\u5e02\",\"\uf5b0\u7af9\u7e23\",\"\uf5b0\u7af9\u5e02\",\"\u82d7\uf817\u7e23\",\"\u5f70\u5316\u7e23\",\"\u5357\u6295\u7e23\",</code><br />\n<code> \"\u96f2\uf5b0\u7e23\",\"\u5609\u7fa9\u7e23\",\"\u5609\u7fa9\u5e02\",\"\u5c4f\uf5b0\u7e23\",\"\u5b9c\u862d\u7e23\",\"\u82b1\u84ee\u7e23\",\"\u53f0\uf817\u7e23\",\"\u6f8e\u6e56\u7e23\",\"\u91d1\u9580\u7e23\",</code><br />\n<code> \"\u9023\u6c5f\u7e23\")</code></p>\n<p><code>citiesTW2 = c(\"\u53f0\u5317\u5e02\",\"\u65b0\u5317\u5e02\",\"\u6843\u5712\u5e02\",\"\u53f0\u4e2d\u5e02\",\"\u53f0\u5357\u5e02\",</code><br />\n<code> \"\u9ad8\u96c4\u5e02\",\"\u57fa\u9686\u5e02\",\"\u65b0\u7af9\u7e23\",\"\u65b0\u7af9\u5e02\",\"\u82d7\u6817\u7e23\",\"\u5f70\u5316\u7e23\",\"\u5357\u6295\u7e23\",</code><br />\n<code> \"\u96f2\u6797\u7e23\",\"\u5609\u7fa9\u7e23\",\"\u5609\u7fa9\u5e02\",\"\u5c4f\u6771\u7e23\",\"\u5b9c\u862d\u7e23\",\"\u82b1\u84ee\u7e23\",\"\u53f0\u6771\u7e23\",\"\u6f8e\u6e56\u7e23\",\"\u91d1\u9580\u7e23\",</code><br />\n<code> \"\u9023\u6c5f\u7e23\")</code></p>\n<p><code>names(citiesTW2)=citiesTW1</code></p>\n<p><code> for (row in text)</code><br />\n<code> {</code><br />\n<code> tmp2 = unlist(strsplit(row,\"\uff05\"))[1] # \"\uff0a\u81fa\u5317\u5e02 \u9670\u6642\u591a\u96f2 \uff12\uff10\"</code><br />\n<code> tmp3 = unlist(strsplit(tmp2,\" \"))</code><br />\n<code> rainTmp = tail(tmp3,1) # \"\uff12\uff10\"</code><br />\n<code> rainTmp = gsub(\"\uff11\",\"1\",rainTmp)</code><br />\n<code> rainTmp = gsub(\"\uff12\",\"2\",rainTmp)</code><br />\n<code> rainTmp = gsub(\"\uff13\",\"3\",rainTmp)</code><br />\n<code> rainTmp = gsub(\"\uff14\",\"4\",rainTmp)</code><br />\n<code> rainTmp = gsub(\"\uff15\",\"5\",rainTmp)</code><br />\n<code> rainTmp = gsub(\"\uff16\",\"6\",rainTmp)</code><br />\n<code> rainTmp = gsub(\"\uff17\",\"7\",rainTmp)</code><br />\n<code> rainTmp = gsub(\"\uff18\",\"8\",rainTmp)</code><br />\n<code> rainTmp = gsub(\"\uff19\",\"9\",rainTmp)</code><br />\n<code> rainTmp = gsub(\"\uff10\",\"0\",rainTmp)</code><br />\n<code> rainTmp = as.integer(str_trim(rainTmp))</code></p>\n<p><code>xcity = str_trim(gsub(\"\uff0a\",\"\",tmp3[1])) # \"\u81fa\u5317\u5e02\"</code><br />\n<code> xcity = gsub(\"\u81fa\",\"\u53f0\",xcity)</code><br />\n<code> xcity = citiesTW2[xcity]</code><br />\n<code> if (xcity %in% citiesTW2)</code><br />\n<code> cat(xcity,\":\",rainTmp,\"\\n\")</code><br />\n<code> }</code></p>", "<p>\u5916\u754c\u5728\u63d0\u5230 R \u8edf\u9ad4\u6642\uff0c\u5728\u8912\u734e\u4e4b\u9918\uff0c\u7e3d\u662f\u4eba\u4e91\u4ea6\u4e91\u5730\u6703\u9806\u4fbf\u63d0\u5230\u300cR \u8edf\u9ad4\u7684\u5b78\u7fd2\u66f2\u7dda\u9817\u9661\u5ced\u300d\u3002\u6211\u601d\u8003\u4e86\u5e7e\u500b\u53ef\u80fd\u539f\u56e0\uff0c\u60f3\u5230\u4ee5\u524d\u6211\u5728\u5b78 Perl \u7a0b\u5f0f\u8a9e\u8a00\u7684\u7d93\u9a57\u3002\u7576\u6642\u6211\u8cb7\u4e86\u597d\u5e7e\u672c Perl \u7684\u66f8\uff0c\u4f46\u5f8c\u4f86\u653e\u68c4\u7684\u539f\u56e0\uff0c\u662f\u6211\u770b\u5230\u7db2\u8def\u4e0a\u6709\u7d93\u9a57\u7684\u4eba\u5beb\u7684 Perl \u7a0b\u5f0f\u6642\uff0c\u7d93\u5e38\u6703\u5728\u66f8\u4e0a\u627e\u4e0d\u5230\u4ed6\u5011\u7528\u7684\u7279\u6b8a\u5947\u602a\u8a9e\u6cd5\uff0c\u9019\u8b93\u6211\u975e\u5e38\u6c23\u9912\u3002</p>\n<p>\u95dc\u65bc\u300cR \u5f88\u96e3\u5b78\u300d\u7684\u8ff7\u601d\uff0c\u53ef\u80fd\u7684\u539f\u56e0\u4e4b\u4e00\uff0c\u6216\u8a31\u5c31\u662f\u9019\u7a2e\u300c\u521d\u5b78\u8005\u770b\u4e0d\u61c2\u7a0b\u5f0f\u300d\u7684\u632b\u6298\u4f7f\u7136\u3002\u6240\u4ee5\u9019\u88e1\u6211\u5217\u51fa\u4e00\u4e9b R \u8edf\u9ad4\u6709\u5225\u65bc\u5176\u4ed6\u7a0b\u5f0f\u8a9e\u8a00\u7684\u5e38\u898b\u7279\u6b8a\u5beb\u6cd5\uff0c\u6216\u8a31\u80fd\u5e6b\u5fd9\u4e00\u4e9b\u521d\u5b78\u8005\u5ea6\u904e\u7b2c\u4e00\u95dc\u3002</p>\n<p><span id=\"more-822\"></span></p>\n<p>R \u8edf\u9ad4\u6709\u5225\u65bc\u5176\u4ed6\u7a0b\u5f0f\u8a9e\u8a00\u7684\u7279\u6b8a\u8a9e\u6cd5\uff1a</p>\n<p><span style=\"font-size: 14pt; color: #000000;\"><strong>1. \u300c=\u300d, \u300c&lt;-\u300d, \u8207\u300c&lt;&lt;-\u300d\u4e09\u500b\u904b\u7b97\u7b26\u865f</strong></span></p>\n<p>(1) \u300c=\u300d\u8ddf\u300c&lt;-\u300d\u662f\u4e00\u6a23\u7684\u3002R \u8a9e\u8a00\u662f\u6e90\u81ea\u65bc AT&amp;T \u7684 S \u8a9e\u8a00\u3002\u5728 S \u8a9e\u8a00\u4e2d\uff0c\u300c&lt;-\u300d\u7684\u610f\u7fa9\u5c31\u662f\u300c=\u300d\u3002\u5f9e R-1.4.0 \u7248\u4e4b\u5f8c\uff0cR \u8edf\u9ad4\u958b\u59cb\u5c0e\u5165\u300c=\u300d\u865f\uff0c\u76ee\u524d\u5169\u8005\u7686\u53ef\u4f7f\u7528\u3002</p>\n<p>(2) \u300c&lt;&lt;-\u300d\u53ea\u5728\u00a0funciton \u4e2d\u4f7f\u7528\uff0c\u53ef\u4ee5\u5f9e function \u5167\u90e8\u6539\u8b8a function \u5916\u9762\u7684\u5168\u57df\u8b8a\u6578(Global Variable) \u7684\u503c\u3002\u82e5\u5728\u51fd\u6578\u5167\u53ea\u6709\u4f7f\u7528\u300c=\u300d\u6216\u300c&lt;-\u300d\uff0c\u5247\u51fd\u6578\u4e4b\u5916\u7684\u5168\u57df\u8b8a\u6578\u503c\u4e0d\u6703\u88ab\u6539\u8b8a\u3002\u4f8b\u5982\uff1a</p>\n<p><span style=\"color: #0000ff;\"><code>x1 = 100 ; x2 = 100</code></span><br />\n<span style=\"color: #0000ff;\"> <code>f2 = function(y)</code></span><br />\n<span style=\"color: #0000ff;\"> <code>{</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 x1 &lt;&lt;- y + 10</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 x2 &lt;- y + 10</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 w = y + 20</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 return(w)</code></span><br />\n<span style=\"color: #0000ff;\"> <code>}</code></span><br />\n<span style=\"color: #0000ff;\"> <code>f2(6)</code></span><br />\n<code>\u00a0 [1] 26 \u00a0 \u00a0# w = \u00a06 + 20 = 26</code><br />\n<span style=\"color: #0000ff;\"><code>x1</code></span><br />\n<code>\u00a0 [1] 16 \u00a0 \u00a0# x1 &lt;&lt;- 6 + 10</code><br />\n<span style=\"color: #0000ff;\"><code>x2</code></span><br />\n<code>\u00a0 [1] 100 \u00a0 \u00a0# x2 \u672a\u88ab\u6539\u8b8a</code></p>\n<p><span style=\"font-size: 14pt; color: #000000;\"><strong>2. \u4f7f\u7528\u6307\u6a19\u6642\uff0c\u5230\u5e95\u8981\u4e0d\u8981\u52a0 c( \u00a0&#8230;.\u00a0) \uff1f</strong></span></p>\n<p>\u539f\u5247\uff1a\u53ea\u8981\u7528\u5230 2 \u500b\u6216 2 \u500b\u4ee5\u4e0a\u6307\u6a19\u6642\uff0c\u90fd\u5fc5\u9808\u7528 c(&#8230;.) \u628a\u9019\u4e9b\u6307\u6a19\u5305\u8d77\u4f86\uff0c\u552f\u4e00\u7684\u4f8b\u5916\u662f \u300c:\u300d\uff0c\u4f8b\u5982 1:3 \u5916\u9762\u5c31\u4e0d\u7528\u52a0 c(&#8230;.)\uff0c\u4f46<span style=\"color: #ff0000;\">\u52a0\u4e86\u4e5f\u4e0d\u6703\u51fa\u932f, \u5982 c(1:3)</span></p>\n<p><span style=\"color: #0000ff;\"><code>x = 11:20</code></span><br />\n<span style=\"color: #0000ff;\"> <code>names(x) = paste0(\"k\",11:20) \u00a0# \u70ba\u6bcf\u500b\u5143\u7d20\u52a0\u4e0a\u540d\u7a31</code></span><br />\n<span style=\"color: #0000ff;\"> <code>x</code></span><br />\n<code>\u00a0 k11 k12 k13 k14 k15 k16 k17 k18 k19 k20 </code><br />\n<code>\u00a0 \u00a011 \u00a012 \u00a013 \u00a014 \u00a015 \u00a016 \u00a017 \u00a018 \u00a019 \u00a020 </code><br />\n<span style=\"color: #0000ff;\"><code>x[3]</code></span><br />\n<code>\u00a0 k13 </code><br />\n<code>\u00a0 \u00a013 </code><br />\n<span style=\"color: #0000ff;\"><code>x[1:3]</code></span><br />\n<code>\u00a0 k11 k12 k13 </code><br />\n<code>\u00a0 \u00a011 \u00a012 \u00a013 </code><br />\n<span style=\"color: #0000ff;\"><code>x[c(2,4,9)]</code></span><br />\n<code>\u00a0 k12 k14 k19 </code><br />\n<code>\u00a0 \u00a012 \u00a014 \u00a019 </code><br />\n<span style=\"color: #0000ff;\"><code>x[\"k13\"]</code></span><br />\n<code>\u00a0 k13 </code><br />\n<code>\u00a0 \u00a013 </code><code></code><br />\n<span style=\"color: #0000ff;\"><code>x[c(\"k12\",\"k14\",\"k19\")]</code></span><br />\n<code>\u00a0 k12 k14 k19 </code><br />\n<code>\u00a0 \u00a012 \u00a014 \u00a019</code></p>\n<p><span style=\"font-size: 14pt; color: #000000;\"><span class=\"UFICommentBody\" style=\"font-size: 12pt;\"><span style=\"font-size: 14pt;\"><strong>3. \u6307\u6a19\u5916\u9762\u8a72\u7528 [ &#8230; ] \u9084\u662f [[ &#8230; ]] ?</strong></span><br />\n</span></span></p>\n<p><span style=\"font-size: 14pt; color: #000000;\"><span class=\"UFICommentBody\" style=\"font-size: 12pt;\">[ &#8230; ] \u50b3\u56de\u7684\u8cc7\u8a0a<strong>\u591a</strong>\uff0c[[ &#8230; ]] \u50b3\u56de\u7684\u8cc7\u8a0a<strong>\u5c11</strong><br />\n<strong>[[ &#8230; ]]</strong> \u96d9\u91cd\u65b9\u522e\u865f\u6709 2 \u500b\u539f\u5247\uff1a</span></span></p>\n<p>(1) \u00a0\u50b3\u56de\u6bd4\u8f03\u7cbe\u7c21\u6fc3\u7e2e\u7684\u8cc7\u8a0a<br />\n(2) \u53ea\u80fd\u653e\u4e00\u500b\u6578\u5b57\u6307\u6a19\u6216\u540d\u7a31\u6307\u6a19\uff0c\u4e0d\u80fd\u653e\u5169\u500b\u4ee5\u4e0a</p>\n<p><span style=\"color: #0000ff;\"><code>some.dataFrame[3] \u00a0 \u00a0 \u00a0 # \u50b3\u56de\u7b2c 3 \u500b\u8b8a\u6578\uff0c\u4f46\u88ab\u5305\u5728\u65b0\u7684 data-frame \u4e2d</code></span><br />\n<span style=\"color: #0000ff;\"><code>some.dataFrame[[3]] \u00a0 \u00a0 # \u50b3\u56de\u7b2c 3 \u500b\u8b8a\u6578 (vector \u6216 factor)</code></span><br />\n<span style=\"color: #0000ff;\"><code>some.List[3] \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0# \u50b3\u56de\u7b2c 3 \u500b\u5143\u7d20\uff0c\u4f46\u88ab\u5305\u5728\u4e00\u500b\u65b0\u7684 list \u8b8a\u6578\u88e1\u9762</code></span><br />\n<span style=\"color: #0000ff;\"><code>some.List[[3]] \u00a0 \u00a0 \u00a0 \u00a0 \u00a0# \u50b3\u56de\u7b2c 3 \u500b\u5143\u7d20\uff0c\u6c92\u6709\u88ab list \u7d50\u69cb\u5305\u8d77\u4f86</code></span><br />\n<span style=\"color: #0000ff;\"><code>x = 1:10</code></span><br />\n<span style=\"color: #0000ff;\"><code>x[1]</code></span><br />\n<code>\u00a0 \u00a0[1] 1</code><br />\n<span style=\"color: #0000ff;\"><code>x[[1]] \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0# \u8207 x[1] \u76f8\u540c</code></span><br />\n<code>\u00a0 \u00a0[1] 1</code><br />\n<span style=\"color: #0000ff;\"><code>names(x) = letters[1:10] \u00a0 \u00a0 # \u5e6b x \u7684\u5143\u7d20\u52a0\u4e0a\u540d\u7a31</code></span><br />\n<span style=\"color: #0000ff;\"><code>x</code></span><br />\n<code>\u00a0 \u00a0<span style=\"color: #ff0000;\">a b c d e f g h i j</span></code><br />\n<code>\u00a0 \u00a01 2 3 4 5 6 7 8 9 10</code><br />\n<span style=\"color: #0000ff;\"><code>x[1] \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 # \u591a\u51fa\u4e86\u5143\u7d20\u540d\u7a31 \"a\"</code></span><br />\n<code>\u00a0 \u00a0<span style=\"color: #ff0000;\">a</span></code><br />\n<code>\u00a0 \u00a01</code><br />\n<code><span style=\"color: #0000ff;\">x[[1]]</span></code><br />\n<code>\u00a0 \u00a0[1] 1</code></p>\n<p><strong>4. \u5411\u91cf/\u77e9\u9663\u4e4b\u9593\u7684\u5411\u91cf\u5316(Vetorized)\u52a0\u6e1b\u4e58\u9664\u904b\u7b97</strong></p>\n<p><span style=\"color: #0000ff;\"><code>x = c(1,2,3,4,5)</code></span><br />\n<span style=\"color: #0000ff;\"> <code>y = c(10,20,30,40,50)</code></span><br />\n<span style=\"color: #0000ff;\"> <code>x + y</code></span><br />\n<code>\u00a0 [1] 11 22 33 44 55</code><br />\n<span style=\"color: #0000ff;\"><code>x - y</code></span><br />\n<code>\u00a0 [1] -9 -18 -27 -36 -45</code><br />\n<span style=\"color: #0000ff;\"><code>x * y</code></span><br />\n<code>\u00a0 [1] 10 40 90 160 250</code><br />\n<span style=\"color: #0000ff;\"><code>y ^ x</code></span><br />\n<code>\u00a0 [1] 10 400 27000 2560000 312500000</code><br />\n<code><span style=\"color: #0000ff;\">x + 100</span> </code><br />\n<code>\u00a0 [1] 101 102 103 104 105</code></p>\n<p><span style=\"font-size: 14pt; color: #000000;\"><strong>5. \u5728\u6307\u6a19\u5340\u57df\u7528\u908f\u8f2f\u689d\u4ef6\u505a\u5feb\u901f\u7684\u8cc7\u6599(\u5143\u7d20/\u6a6b\u5217(rows))\u7be9\u9078</strong></span></p>\n<p><span style=\"color: #0000ff;\"><code>score = c(43,56,74,61,61,55)</code></span><br />\n<span style=\"color: #0000ff;\"> <code> sex = c(\"\u7537\",\"\u7537\",\"\u5973\",\"\u5973\",\"\u5973\",\"\u7537\")</code></span><br />\n<span style=\"color: #0000ff;\"> <code> blood = c(\"A\",\"O\",\"A\",\"O\",\"O\",\"A\")</code></span><br />\n<span style=\"color: #0000ff;\"> <code> score[score &lt;= 60]</code></span><br />\n<code>\u00a0 [1] 43 56 55</code><br />\n<span style=\"color: #0000ff;\"><code> score[sex == \"\u5973\"]</code></span><br />\n<code>\u00a0 [1] 74 61 61</code><br />\n<span style=\"color: #0000ff;\"><code> mean(score[sex == \"\u5973\"])</code></span><br />\n<code>\u00a0 [1] 65.33333</code><br />\n<span style=\"color: #0000ff;\"><code> mean(score[sex == \"\u7537\"])</code></span><br />\n<code>\u00a0 [1] 51.33333</code><br />\n<span style=\"color: #0000ff;\"><code> # \u6240\u6709 A \u578b\u7537\u6027\u7684\u5e73\u5747\u6210\u7e3e</code></span><br />\n<span style=\"color: #0000ff;\"> <code> mean(score[sex == \"\u7537\" &amp; blood == \"A\"])</code></span><br />\n<code>\u00a0 [1] 49</code><br />\n<span style=\"color: #0000ff;\"><code> # \u627e\u51fa\u6240\u6709 Sepal.Length &gt; 4.0 \u7684\u6a6b\u5217(rows), \u4e26\u5132\u5b58\u5728 iris2</code></span><br />\n<span style=\"color: #0000ff;\"> <code> iris2 = iris[iris$Sepal.Length &gt; 4.0, ]</code></span></p>\n<p><span style=\"font-size: 14pt; color: #000000;\"><strong>6. \u77e9\u9663/\u8cc7\u6599\u6846\u67b6\u884c\u5217\u6307\u6a19\u7684\u7701\u7565</strong></span></p>\n<p><span style=\"color: #0000ff;\"><code>M = matrix(c(1,2,3,4,5,6),nrow=2,ncol=3,byrow=TRUE)</code></span><br />\n<span style=\"color: #0000ff;\"> <code>M</code></span><br />\n<code>\u00a0 \u00a0 \u00a0 \u00a0[,1] [,2] [,3]</code><br />\n<code>\u00a0 [1,] \u00a0 1 \u00a0 \u00a02 \u00a0 \u00a03</code><br />\n<code>\u00a0 [2,] \u00a0 4 \u00a0 \u00a05 \u00a0 \u00a06</code><br />\n<span style=\"color: #0000ff;\"><code>M[1,2] \u00a0 # \u53d6\u51fa\u55ae\u4e00\u5143\u7d20\u503c</code></span><br />\n<code>\u00a0 [1] 2</code><br />\n<span style=\"color: #0000ff;\"><code>M[1,] \u00a0 \u00a0# \u53d6\u51fa\u7b2c 1 \u5217(row)</code></span><br />\n<code>\u00a0 [1] 1 2 3</code><br />\n<span style=\"color: #0000ff;\"><code>M[2,] \u00a0 \u00a0# \u53d6\u51fa\u7b2c 2 \u5217(row)</code></span><br />\n<code>\u00a0 [1] 4 5 6</code><br />\n<span style=\"color: #0000ff;\"><code>M[,1] \u00a0 \u00a0# \u53d6\u51fa\u7b2c 1 \u884c(column)</code></span><br />\n<code>\u00a0 [1] 1 4</code><br />\n<span style=\"color: #0000ff;\"><code>M[,3] \u00a0 \u00a0# \u53d6\u51fa\u7b2c 3 \u884c(column)</code></span><br />\n<code>\u00a0 [1] 3 6</code></p>\n<p><span style=\"font-size: 14pt; color: #000000;\"><strong>7.\u300c$\u300d\u7b26\u865f\u662f\u4ec0\u9ebc\u6771\u6771\uff1f</strong></span></p>\n<p>\u300c$\u300d\u662f R \u8edf\u9ad4\u4e2d\u7684 List (\u4e32\u5217) \u8b8a\u6578\u8ddf Data Frame (\u8cc7\u6599\u6846\u67b6) \u8b8a\u6578\u5728\u6293\u53d6\u500b\u5225\u5167\u90e8\u5143\u7d20\u6216\u8b8a\u6578\u6642\u6240\u7528\u7684\u904b\u7b97\u5143\u3002\u4f8b\u5982\uff1a</p>\n<p><span style=\"color: #0000ff;\"><code>friend = list(fname=\"\u6797\u5927\u65fa\",age=25,child=c(\"\u6797\u5c0f\u83ef\",\"\u6797\u5c0f\u73cd\"))</code></span><br />\n<span style=\"color: #0000ff;\"> <code>names(friend)</code></span><br />\n<code>\u00a0 [1] \"</code>fname<code>\" \"age\" \"child\"</code><br />\n<span style=\"color: #0000ff;\"><code>friend$fname</code></span><br />\n<code>\u00a0 [1] \"\u6797\u5927\u65fa\"</code><br />\n<span style=\"color: #0000ff;\"><code>friend$age</code></span><br />\n<code>\u00a0 [1] 25</code><br />\n<span style=\"color: #0000ff;\"><code>friend$child</code></span><br />\n<code>\u00a0 [1] \"\u6797\u5c0f\u83ef\" \"\u6797\u5c0f\u73cd\"</code><br />\n<span style=\"color: #0000ff;\"><code>friend$child[2]</code></span><br />\n<code>\u00a0 [1] \"\u6797\u5c0f\u73cd\"</code><br />\n<span style=\"color: #0000ff;\"><code># \u6216</code></span><br />\n<span style=\"color: #0000ff;\"><code>childs = friend$child</code></span><br />\n<span style=\"color: #0000ff;\"> <code>childs[2]</code></span><br />\n<code>\u00a0 [1] \"\u6797\u5c0f\u73cd\"</code></p>\n<p>List \u8b8a\u6578\u662f\u5f88\u591a R \u7684\u5927\u578b\u8a08\u7b97\u51fd\u6578\u50b3\u56de\u7684\u6163\u7528\u8b8a\u6578\u578b\u614b\uff0c\u56e0\u70ba List \u8b8a\u6578\u5167\u53ef\u4ee5\u5305\u5c71\u5305\u6d77\uff0c\u4ec0\u9ebc\u8cc7\u6599\u90fd\u53ef\u4ee5\u653e\u9032\u53bb\u3002\u4f8b\u5982</p>\n<p><span style=\"color: #0000ff;\"><code>result = lm(Sepal.Length ~ Petal.Length,data=iris)</code></span><br />\n<span style=\"color: #0000ff;\"> <code>names(result)</code></span><br />\n<code>\u00a0 [1] \"coefficients\" \"residuals\" \"effects\" \"rank\"</code><br />\n<code>\u00a0 [5] .........</code><br />\n<span style=\"color: #0000ff;\"><code>result$coefficients</code></span><br />\n<code>\u00a0 (Intercept) Petal.Length</code><br />\n<code>\u00a0 \u00a04.3066034 \u00a0 \u00a0 0.4089223</code></p>\n<p><span style=\"color: #0000ff;\"><code>SL = iris$Sepal.Length \u00a0# \u53d6\u51fa iris \u8cc7\u6599\u6846\u67b6\u5167\u7684 Sepal.Length \u8b8a\u6578</code></span></p>\n<p><span style=\"font-size: 14pt;\"><strong>8. \u90a3\u4e9b\u5947\u602a\u7684\u300c%&gt;%\u300d\u7b26\u865f\u662f\u4ec0\u9ebc\u6771\u6771\uff1f</strong></span></p>\n<p>\u300c%&gt;%\u300d\u662f dplyr \u5957\u4ef6\u5e38\u7528\u7684\u300c\u5411\u524d(\u5176\u5be6\u662f\u5411\u53f3)\u7ba1\u9053\u300d(forward pipe) \u904b\u7b97\u5b50\uff0c\u53ef\u4ee5\u628a\u539f\u672c\u5206\u4f5c\u597d\u5e7e\u884c\u7684\u904b\u7b97\u7d50\u5408\u5728\u4e00\u8d77\u3002\u4f8b\u5982</p>\n<p><span style=\"color: #0000ff;\"><code>iris %&gt;% subset(select=Sepal.Length) %&gt;% summary</code></span><br />\n<code>\u00a0 Sepal.Length</code><br />\n<code>\u00a0 Min. :4.300</code><br />\n<code>\u00a0 1st Qu.:5.100</code><br />\n<code>\u00a0 Median :5.800</code><br />\n<code>\u00a0 Mean :5.843</code><br />\n<code>\u00a0 3rd Qu.:6.400</code><br />\n<code>\u00a0 Max. :7.900</code></p>\n<p>\u4e0a\u9762\u7684\u7a0b\u5f0f\u76f8\u7576\u65bc\u4ee5\u4e0b\u9019\u4e00\u884c\u7a0b\u5f0f\u300c\u7531\u5167\u800c\u5916\u300d\u7684\u904b\u7b97\u9806\u5e8f\u6539\u6210\u300c\u7531\u5de6\u800c\u53f3\u300d\uff1a</p>\n<p><code><span style=\"color: #0000ff;\">summary(subset(iris, select=Sepal.Length))</span></code></p>\n<p>\u5176\u5be6\u539f\u672c\u5206\u958b\u5beb\u6210\u5169\u884c\u904b\u7b97\uff0c\u9700\u8981\u4f54\u7528\u8a18\u61b6\u9ad4\u591a\u7528\u4e00\u500b\u81e8\u6642\u8b8a\u6578 iris2\uff1a</p>\n<p><span style=\"color: #0000ff;\"><code>iris2 = subset(iris, select=Sepal.Length)</code></span><br />\n<span style=\"color: #0000ff;\"><code> summary(iris2)</code></span></p>\n<p>dplyr \u5957\u4ef6\u9019\u500b\u7b26\u865f\u6e90\u81ea\u65bc magrittr \u5957\u4ef6\uff0c\u9664\u4e86\u300c%&gt;%\u300d\u7b26\u865f\u5916\uff0c\u9084\u6709\u300c%&lt;&gt;%\u300d\u3001\u300c%$%\u300d\u3001\u300c%T&gt;%\u300d\u4e09\u7a2e\u904b\u7b97\u5b50\u53ef\u7528\u3002\u4f46\u662f\uff0c\u9019\u985e\u5c6c\u65bc\u67d0\u7279\u5b9a\u5957\u4ef6\u7684\u904b\u7b97\u7b26\u865f\uff0c\u76ee\u524d\u5c1a\u672a\u88ab\u7d0d\u5165 R \u8edf\u9ad4\u6838\u5fc3\uff0c\u56e0\u6b64\u570b\u5916\u4e5f\u6709\u4e9b\u4eba\u8a8d\u70ba\uff0c\u5728\u5beb R \u7684\u5957\u4ef6\u6642\uff0c\u4e0d\u9069\u5408\u4f7f\u7528\u9019\u985e\u904b\u7b97\u7b26\u865f\uff0c\u4ee5\u514d\u9020\u6210\u65b0\u5957\u4ef6\u5c0d\u5176\u4ed6\u5957\u4ef6\u7684\u904e\u5ea6\u4f9d\u8cf4\u3002</p>", "<p>\u6700\u8fd1\u525b\u597d\u7528\u5230 SparkR, \u4f46 Google \u4e0a\u7684\u4e00\u4e9b\u5b89\u88dd\u7db2\u9801\u7531\u65bc\u7248\u672c\u8207\u8a2d\u5b9a\u4e0d\u540c\uff0c\u8cc7\u8a0a\u90fd\u4e0d\u5927\u5b8c\u6574\u3002\u9019\u88e1\u63d0\u4f9b\u4e00\u4e0b\u6211\u7684\u5b89\u88dd\u904e\u7a0b</p>\n<p><span id=\"more-953\"></span></p>\n<p><strong>1. \u4e0b\u8f09 hadoop, \u89e3\u58d3\u7e2e\u5230, e.g, d:\\hadoop</strong></p>\n<p>https://archive.apache.org/dist/hadoop/common/</p>\n<p>\u6211\u4e0b\u8f09\u7684\u662f hadoop-2.7.6.tar.gz</p>\n<p><strong>2. \u4e0b\u8f09 spark, \u89e3\u58d3\u7e2e\u5230, e.g. d:\\spark</strong></p>\n<p>http://spark.apache.org/downloads.html</p>\n<p>\u6211\u4e0b\u8f09\u7684\u662f spark-2.3.0-bin-hadoop-2.7.tgz</p>\n<p><strong>3. \u4e0b\u8f09 winutils.exe, copy \u5230 d:\\hadoop\\bin</strong><br />\nhttps://github.com/steveloughran/winutils/raw/master/hadoop-2.6.0/bin/winutils.exe</p>\n<p><strong>4. \u4f7f\u7528\u7cfb\u7d71\u7ba1\u7406\u54e1\u8eab\u5206\u6253\u958b DOS \u8996\u7a97(\u547d\u4ee4\u63d0\u793a\u5b57\u5143), \u57f7\u884c\u4ee5\u4e0b\u6307\u4ee4\uff1a</strong></p>\n<p><code>c:<br />\nd:\\hadoop\\bin\\wintuils.exe chmod 777 \\tmp\\hive</code></p>\n<p><strong>5. \u63a7\u5236\u53f0 =&gt; \u7cfb\u7d71 =&gt; \u74b0\u5883\u8b8a\u6578</strong></p>\n<p>(5-1) \u65b0\u589e HADOOP_HOME \u8207 SPARK_HOME, \u5206\u5225\u8a2d\u5b9a\u70ba d:\\haoop \u8207 d:\\spark</p>\n<p>(5-2) \u5728\u7cfb\u7d71 PATH \u74b0\u5883\u8b8a\u6578\u52a0\u5165 R bin \u8def\u5f91, \u4f8b\u5982<br />\nd:\\R\\R-3.4.0\\bin\\x64;&#8230;&#8230;&#8230;</p>\n<p>&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-<br />\n\u9032\u5165R \u8edf\u9ad4\uff1a</p>\n<p>library(SparkR, lib.loc = c(file.path(Sys.getenv(&#8220;SPARK_HOME&#8221;), &#8220;R&#8221;, &#8220;lib&#8221;)))</p>\n<p>sparkR.session(master = &#8220;local&#8221;,<br />\nsparkConfig = list(spark.sql.warehouse.dir = &#8220;/file:d:/temp&#8221;))</p>\n<p>df &lt;- createDataFrame(faithful)<br />\nhead(df)</p>\n<p><img class=\"alignnone size-full wp-image-954\" src=\"http://steve-chen.tw/wp-content/uploads/2018/06/R_output.jpg\" alt=\"\" width=\"937\" height=\"834\" srcset=\"http://steve-chen.tw/wp-content/uploads/2018/06/R_output.jpg 937w, http://steve-chen.tw/wp-content/uploads/2018/06/R_output-300x267.jpg 300w, http://steve-chen.tw/wp-content/uploads/2018/06/R_output-768x684.jpg 768w\" sizes=\"(max-width: 937px) 100vw, 937px\" /></p>", "<p>\u6211\u9019\u5e7e\u5929\u6b63\u5728\u4fee\u6539\u6211\u90a3\u672c\u300cR\u8edf\u9ad4\uff1a\u61c9\u7528\u7d71\u8a08\u65b9\u6cd5\u300d\u7684\u66f8</p>\n<p>\u7531\u65bc\u7576\u521d\u51fa\u66f8\u6642\u7684 R \u7248\u672c\u662f 2.10.1\uff0c\u76ee\u524d\u5df2\u7d93\u662f 3.4.4\uff0c\u67d0\u4e9b packages \u5df2\u7d93\u6d88\u5931\u5728 CRAN\uff0c\u4f46\u6700\u5927\u7684\u5dee\u7570\u662f\u5728\u6642\u9593\u6578\u5217\u90a3\u4e00\u7ae0\uff0c\u7531\u65bc R \u8edf\u9ad4\u6838\u5fc3\u7684 arima \u51fd\u6578\u6709\u90e8\u5206\u6539\u5beb\uff0c\u5c0e\u81f4\u6709\u7528\u5230 TSA \u5957\u4ef6\u7684\u300c\u8f49\u63db\u51fd\u6578\u6a21\u5f0f\u300d\u8207\u300c\u4ecb\u5165\u4e8b\u4ef6\u6a21\u578b\u300d\u7684\u67d0\u4e9b\u7a0b\u5f0f\u6703\u51fa\u932f\u3002\u9019\u88e1\u63d0\u4f9b\u8b80\u8005\u5011\u4e00\u500b\u61c9\u6025\u7684\u89e3\u6c7a\u65b9\u6cd5\u3002<br />\n<span id=\"more-931\"></span></p>\n<p>\u5982\u679c\u5927\u5bb6\u6709\u6025\u7528\u5230\u4e0a\u8ff0\u5169\u500b\u6a21\u578b\u7684\u8a71\uff0c\u932f\u8aa4\u662f\u56e0\u70ba arima \u6838\u5fc3\u51fd\u6578\u524d\u5f8c\u7248\u672c\u4fee\u6539\u7684\u7b97\u6cd5\u4e0d\u540c\uff0c\u901a\u5e38\u6703\u767c\u751f\u81ea\u5df1\u7522\u751f\u7684\u843d\u5f8c\u671f\u6578\u5217\u958b\u982d\u7684 NA\uff0c\u4f8b\u5982 Zlag3 = zlag(Z,3) \u9019\u500b\u6578\u5217\uff0c\u6703\u5728\u6700\u524d\u9762\u7522\u751f 3 \u500b NA \u503c\uff0c\u5c0e\u81f4\u51fa\u932f\u3002</p>\n<p>\u6b64\u6642\uff0c\u53ef\u4ee5\u7528\u985e\u4f3c imputeTS \u5957\u4ef6\uff0c\u628a NA \u907a\u5931\u503c\u4f30\u8a08\u51fa\u4f86\u3002</p>\n<p>\u4f8b\u5982\u66f8\u4e0a <strong>18.4.2 \u5c0f\u7bc0</strong>(\u7a0b\u5f0f\u7bc4\u4f8b <strong>18-3</strong>)\uff1a<br />\n&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;</p>\n<p>library(TSA)<br />\ngasRate3 = zlag(gasRate,3) # \u843d\u5f8c 3 \u671f\uff0c\u6700\u524d\u9762\u6703\u6709 3 \u500b NA</p>\n<p><span style=\"color: #ff0000;\">library(imputeTS)</span><br />\n<span style=\"color: #ff0000;\"># \u5c07\u6700\u524d\u9762 3 \u500b NA \u63db\u6210\u4f30\u8a08\u503c</span><br />\n<span style=\"color: #ff0000;\">gasRate3 = na.interpolation(gasRate3)</span></p>\n<p>model = arima(CO2,order=c(2,0,0),include.mean=T,<br />\nxtransf=cbind(gasRate3), transfer=list(c(1,2)))</p>\n<p>\u9019\u6a23\u61c9\u8a72\u5c31\u80fd\u6b63\u5e38\u57f7\u884c\u3002</p>", "<p>\u6700\u8fd1\u5728\u8655\u7406\u653f\u5e9c\u623f\u5730\u7522\u5be6\u50f9\u767b\u9304\u8cc7\u6599\u6642\uff0c\u767c\u73fe\u300c\u6a13\u5c64\u300d\u76f8\u95dc\u7684\u6b04\u4f4d\u662f\u4ee5\u4e2d\u6587\u6578\u5b57\u578b\u614b\u7d00\u9304\uff0c\u4f8b\u5982\u300c\u5341\u5c64\u300d\u3001\u300c\u4e8c\u5341\u5c64\u300d\u3001\u300c\u5341\u4e94\u5c64\u300d\u7b49\u7b49\u3002\u4e0a\u7db2\u627e\u4e86\u4e00\u4e0b\uff0c\u4e26\u6c92\u6709\u770b\u5230\u6709\u628a\u4e2d\u6587\u6578\u5b57\u8f49\u6210\u963f\u62c9\u4f2f\u6578\u5b57\u7684 R \u7a0b\u5f0f\uff0c\u6240\u4ee5\u6211\u5c31\u81ea\u5df1\u5beb\u4e86\u4e00\u500b\u3002</p>\n<p><span id=\"more-999\"></span></p>\n<p>&gt; head(floor)<br />\n[1] &#8220;\u4e8c\u5341\u4e8c\u5c64&#8221; &#8220;\u4e94\u5c64&#8221; &#8220;\u4e8c\u5341\u516b\u5c64&#8221; &#8220;\u4e8c\u5341\u4e8c\u5c64&#8221; &#8220;\u4e09\u5c64&#8221; &#8220;\u5341\u516d\u5c64&#8221;<br />\n&gt; tail(floor)<br />\n[1] &#8220;\u4e8c\u5341\u56db\u5c64&#8221; &#8220;\u5341\u4e00\u5c64&#8221; &#8220;\u5c64&#8221; &#8220;\u5341\u4e94\u5c64&#8221; &#8220;\u5341\u4e94\u5c64&#8221; &#8220;\u4e03\u5c64&#8221;<br />\n&gt; length(floor)<br />\n[1] 1959<br />\n&gt; floor = gsub(&#8220;\u5c64&#8221;,&#8221;&#8221;,floor)<br />\n&gt; head(floor)<br />\n[1] &#8220;\u4e8c\u5341\u4e8c&#8221; &#8220;\u4e94&#8221; &#8220;\u4e8c\u5341\u516b&#8221; &#8220;\u4e8c\u5341\u4e8c&#8221; &#8220;\u4e09&#8221; &#8220;\u5341\u516d&#8221;</p>\n<p>&gt; cN = c(&#8220;\u4e00&#8221;,&#8221;\u4e8c&#8221;,&#8221;\u4e09&#8221;,&#8221;\u56db&#8221;,&#8221;\u4e94&#8221;,&#8221;\u516d&#8221;,&#8221;\u4e03&#8221;,&#8221;\u516b&#8221;,&#8221;\u4e5d&#8221;,&#8221;\u5341&#8221;)<br />\n&gt; eN1 = as.character(1:10)<br />\n&gt;<br />\n&gt; names(eN1)=cN<br />\n&gt; eN2a = eN2b = eN3 = eN1<br />\n&gt; eN2a[10] = &#8220;1&#8221;<br />\n&gt; eN2b[10]=&#8221;0&#8243;<br />\n&gt; eN3[10]=&#8221;&#8221;</p>\n<p>&gt; eN1<br />\n\u4e00 \u4e8c \u4e09 \u56db \u4e94 \u516d \u4e03 \u516b \u4e5d \u5341<br />\n&#8220;1&#8221; &#8220;2&#8221; &#8220;3&#8221; &#8220;4&#8221; &#8220;5&#8221; &#8220;6&#8221; &#8220;7&#8221; &#8220;8&#8221; &#8220;9&#8221; &#8220;10&#8221;<br />\n&gt; eN2a<br />\n\u4e00 \u4e8c \u4e09 \u56db \u4e94 \u516d \u4e03 \u516b \u4e5d \u5341<br />\n&#8220;1&#8221; &#8220;2&#8221; &#8220;3&#8221; &#8220;4&#8221; &#8220;5&#8221; &#8220;6&#8221; &#8220;7&#8221; &#8220;8&#8221; &#8220;9&#8221; &#8220;1&#8221;<br />\n&gt; eN2b<br />\n\u4e00 \u4e8c \u4e09 \u56db \u4e94 \u516d \u4e03 \u516b \u4e5d \u5341<br />\n&#8220;1&#8221; &#8220;2&#8221; &#8220;3&#8221; &#8220;4&#8221; &#8220;5&#8221; &#8220;6&#8221; &#8220;7&#8221; &#8220;8&#8221; &#8220;9&#8221; &#8220;0&#8221;<br />\n&gt; eN3<br />\n\u4e00 \u4e8c \u4e09 \u56db \u4e94 \u516d \u4e03 \u516b \u4e5d \u5341<br />\n&#8220;1&#8221; &#8220;2&#8221; &#8220;3&#8221; &#8220;4&#8221; &#8220;5&#8221; &#8220;6&#8221; &#8220;7&#8221; &#8220;8&#8221; &#8220;9&#8221; &#8220;&#8221;</p>\n<p>library(mgsub)</p>\n<p>library(stringr)</p>\n<p>floor2 = NULL<br />\nfor (x in floor)<br />\n{<br />\nm = str_length(x)<br />\nif (m == 1)<br />\nout = as.numeric(eN1[x])<br />\nelse if (m == 2)<br />\n{<br />\nif (grepl(&#8220;^\u5341&#8221;,x))<br />\nout = as.numeric(mgsub(x, cN, eN2a))<br />\nelse<br />\nout = as.numeric(mgsub(x, cN, eN2b))<br />\n} else {<br />\nout = as.numeric(mgsub(x, cN, eN3))<br />\n}<br />\nfloor2 = c(floor2,out)<br />\n}</p>\n<p>&gt; head(floor)<br />\n[1] &#8220;\u4e8c\u5341\u4e8c&#8221; &#8220;\u4e94&#8221; &#8220;\u4e8c\u5341\u516b&#8221; &#8220;\u4e8c\u5341\u4e8c&#8221; &#8220;\u4e09&#8221; &#8220;\u5341\u516d&#8221;<br />\n&gt; head(floor2)<br />\n[1] 22 5 28 22 3 16<br />\n&gt; tail(floor)<br />\n[1] &#8220;\u4e8c\u5341\u56db&#8221; &#8220;\u5341\u4e00&#8221; &#8220;&#8221; &#8220;\u5341\u4e94&#8221; &#8220;\u5341\u4e94&#8221; &#8220;\u4e03&#8221;<br />\n&gt; tail(floor2)<br />\n[1] 24 11 NA 15 15 7</p>", "<p>\u6559 R \u8ab2\u7a0b\u6642\u525b\u597d\u6709\u540c\u5b78\u8a62\u554f\uff0c\u9019\u88e1\u5206\u4eab\u4e00\u4e0b\u9664\u4e86\u5e38\u7528\u7684 SELECT \u4e4b\u5916\uff0csqldf \u5957\u4ef6\u5982\u4f55\u57f7\u884c INSERT, UPDATE, \u8207 CREATE TABLE AS SELECT</p>\n<p><span id=\"more-982\"></span></p>\n<p><strong>1. INSERT</strong></p>\n<p>&gt; query = c(&#8220;INSERT INTO iris VALUES (4,4,4,4,&#8217;setosa&#8217;)&#8221;,&#8221;SELECT * FROM iris&#8221;)<br />\n&gt; iris2 = sqldf(query)<br />\n&gt; tail(iris2,3)</p>\n<p><code>149 6.2 3.4 5.4 2.3 virginica</code><br />\n<code>150 5.9 3.0 5.1 1.8 virginica</code><br />\n<code>151 <span style=\"color: #0000ff;\">4.0 4.0 4.0 4.0 setosa</span></code></p>\n<p><strong>2. UPDATE</strong></p>\n<p>&gt; query = c(&#8220;UPDATE iris SET [Sepal.Length]=10 WHERE [Sepal.Length] = 5.1 AND [Sepal.Width]=3.5&#8221;,<br />\n&#8220;SELECT * FROM iris&#8221;)<br />\n&gt; iris2 = sqldf(query)<br />\n&gt; head(iris2,3)</p>\n<p><code> Sepal.Length Sepal.Width Petal.Length Petal.Width Species</code><br />\n<code>1 <span style=\"color: #0000ff;\">10.0</span> 3.5 1.4 0.2 setosa</code><br />\n<code>2\u00a0 4.9 3.0 1.4 0.2 setosa</code><br />\n<code>3\u00a0 4.7 3.2 1.3 0.2 setosa</code></p>\n<p><strong>3. CREATE TABLE AS SELECT</strong></p>\n<p>&gt; query = c(&#8220;CREATE TABLE tmp AS SELECT * FROM iris WHERE\u00a0 [Sepal.Length] &gt; 4.7&#8221;,<br />\n&#8220;SELECT * FROM tmp&#8221;)<br />\n&gt; iris2 = sqldf(query)<br />\n&gt; dim(iris2)</p>\n<p><code>[1] 139 5</code></p>\n<p><strong>\u95dc\u65bc 3 \u7684\u88dc\u5145\uff1a</strong>\u5176\u5be6\u6700\u5feb\u7684\u65b9\u5f0f\uff0c\u662f</p>\n<p>iris2 = sqldf(&#8220;SELECT * FROM iris WHERE\u00a0 [Sepal.Length] &gt; 4.7&#8221;)<br />\n<strong><br />\n</strong>\u4e0a\u9762\u7684\u7bc4\u4f8b\u53ea\u662f demo sqldf \u53ef\u8207\u50b3\u7d71 SQL &#8220;CREATE TABLE AS&#8221; \u8a9e\u6cd5\u76f8\u5bb9</p>\n<p>\u8a3b\uff1a<br />\niris \u8cc7\u6599\u6a94\u56e0\u70ba\u524d 4 \u500b\u8b8a\u6578\u7684\u540d\u7a31\u6709\u5305\u542b\u82f1\u6587\u64da\u9ede &#8220;.&#8221;, \u4f46\u9019\u7b26\u865f\u5728 SQL \u6709\u968e\u5c64\u7528\u9014\uff0c\u6240\u4ee5\u9700\u7528 [ &#8230;. ] \u4ee5\u907f\u514d\u8aa4\u5224</p>", "<p>\u4ee5\u4e0b\u7bc4\u4f8b\u7a0b\u5f0f\uff0c\u4f7f\u7528 ITRI (\u53f0\u7063\u5de5\u7814\u9662\u8a9e\u97f3\u670d\u52d9) API\uff0c\u8b93 R \u9054\u6210\u7c21\u55ae\u7684 Text to Speech \u529f\u80fd</p>\n<p><span id=\"more-975\"></span></p>\n<p>\u8f14\u52a9\u8edf\u9ad4\uff1aWindows command line WAV player: sWavPlayer.exe</p>\n<p>\u8acb\u81f3\u4ee5\u4e0b\u7db2\u5740\u4e0b\u8f09\uff0c\u89e3\u58d3\u7e2e\u5f8c\uff0c\u653e\u5728\u67d0\u500b\u7279\u5b9a\u8cc7\u6599\u593e\uff0c\u4f8b\u5982: d:\\voice\\sWavPlayer.exe</p>\n<p><a href=\"http://www.dcmembers.com/skwire/download/swavplayer/\" target=\"_blank\" rel=\"noopener noreferrer\">http://www.dcmembers.com/skwire/download/swavplayer/</a></p>\n<p>R : \u9700\u5b89\u88dd Rtts \u8207 sound \u5957\u4ef6</p>\n<p>Code:</p>\n<p><code>library(Rtts)</code><br />\n<code>library(sound)</code><br />\n<code>setWavPlayer(\"d:/voice/sWavPlayer.exe\")</code></p>\n<p><code>t1 = \"\u4eca\u5929\u8981\u53bb\u770b\u96fb\u5f71\"</code><br />\n<code>t2 = iconv(t1,\"CP950\",\"UTF-8\")</code><br />\n<code>tmp_file = tempfile(fileext = \".wav\")</code><br />\n<code>tts_ITRI(t2,speaker=\"Theresa\",destfile=tmp_file)</code><br />\n<code>play(tmp_file)</code><br />\n<code>unlink(tmp_file)</code></p>\n<p>\u8a3b\uff1a</p>\n<p>\u53ef\u9078\u64c7\u7684 speaker \u6709\u4ee5\u4e0b\u540d\u5b57\uff0c\u9810\u8a2d\u70ba &#8220;Bruce&#8221;</p>\n<p>[1] English &amp; Chinese: &#8220;Bruce&#8221;, &#8220;Theresa&#8221;, &#8220;Angela&#8221;, &#8220;MCHEN_Bruce&#8221;, &#8220;MCHEN_Joddess&#8221;;</p>\n<p>[2] Only English: &#8220;ENG_Bob&#8221;, &#8220;ENG_Alice&#8221;, &#8220;ENG_Tracy&#8221;.</p>", "<p>R \u8edf\u9ad4\u4e2d\u6709\u4e00\u500b svSocket \u5957\u4ef6\u53ef\u4ee5\u8b93 R \u6210\u70ba Socket Server\uff0c\u5176\u512a\u9ede\u662f\u555f\u52d5 Server \u5f8c\u8f49\u70ba\u80cc\u5f8c\u57f7\u884c\uff0cR \u8edf\u9ad4\u53ef\u4ee5\u7e7c\u7e8c\u4f5c\u5176\u4ed6\u4e8b\u60c5\uff0c\u4f46\u76ee\u524d\u50c5\u627e\u5f97\u5230 R \u8207 tcl \u76f8\u5c0d\u65bc svSocket \u7684 Client \u7a0b\u5f0f\u7bc4\u4f8b\u3002\u4ee5\u4e0b\u662f\u6211\u7528 PHP \u7576\u4f5c Socket Client \u9023\u63a5\u5f8c\u7aef R svSocket Server \u7684\u6e2c\u8a66\u7d50\u679c\u3002</p>\n<p><span id=\"more-907\"></span></p>\n<p><strong>Step 1.</strong> \u5728 R \u8edf\u9ad4\u4e2d\u57f7\u884c\u4ee5\u4e0b\u6307\u4ee4\uff1a</p>\n<p><span style=\"color: #0000ff;\">library(svSocket)</span><br />\n<span style=\"color: #0000ff;\"> startSocketServer(port = 6011)</span></p>\n<p>Note:<br />\n(1) \u9632\u706b\u7246\u8981\u89e3\u9664\u5c0d localhost port 6011 \u7684\u5c01\u9396\u3002<br />\n(2) \u53ef\u7528 stopSocketServer(port = 6011) \u505c\u6b62 Server \u904b\u4f5c\u3002</p>\n<p><strong>Step 2.</strong> \u5beb\u4e00\u500b\u53ef\u5728 local \u7db2\u7ad9\u4e2d\u57f7\u884c\u7684 PHP \u7a0b\u5f0f, \u4f8b\u5982 svClient.php\uff1a</p>\n<p><code>&lt;?php</code><br />\n<code>set_time_limit(0);</code></p>\n<p><code>$host=\"127.0.0.1\";</code><br />\n<code>$port = 6011;</code></p>\n<p><code>$fp = fsockopen ($host, $port, $errno, $errstr,10);</code><br />\n<code>$out = \"\";</code><br />\n<code>if (!$fp)</code><br />\n<code> $out = \"Error: could not open socket connection\";</code><br />\n<code>else</code><br />\n<code>{</code><br />\n<code>    $in = \"&lt;&lt;&lt;e&gt;&gt;&gt;(rnorm(100))&lt;&lt;&lt;n&gt;&gt;&gt;log(2.3)\\r\";</code><br />\n<code>    fputs ($fp, $in);</code><br />\n<code>    $out = fread($fp, 102400);</code><br />\n<code>    fclose ($fp);</code><br />\n<code>}</code><br />\n<code>// assume socket server in Windows OS</code><br />\n<code>$out = iconv(\"big5\",\"utf-8\",$out);</code><br />\n<code>echo nl2br($out);</code><br />\n<code>?&gt;</code></p>\n<p>\u8aaa\u660e\uff1a<span style=\"color: #0000ff;\">&lt;&lt;&lt;e&gt;&gt;&gt;</span> \u662f\u8b93 svSocket \u628a\u63a5\u6536\u5230\u7684\u5b57\u4e32\u7576\u6210 R \u7684\u7a0b\u5f0f\u78bc\u8dd1\u51fa\u7d50\u679c\uff0c<span style=\"color: #0000ff;\">&lt;&lt;&lt;n&gt;&gt;&gt;</span> \u662f\u63db\u884c\u7b26\u865f</p>\n<p><strong>Step 3.</strong> \u7528\u700f\u89bd\u5668\u9023\u7dda\u5230 http://127.0.0.1/svClient.php</p>\n<p>\u7db2\u9801\u7684\u8f38\u51fa\u7d50\u679c\u5982\u4e0b\uff1a</p>\n<p><img src=\"http://steve-chen.tw/wp-content/uploads/2018/01/svOut2.jpg\" alt=\"\" width=\"500\" /></p>\n<p>&nbsp;</p>", "<p>R \u8edf\u9ad4\u7528\u65bc\u5be6\u52d9\u5206\u6790\u6642\uff0c\u7d93\u5e38\u9700\u8981\u642d\u914d\u5b9a\u671f\u81ea\u52d5\u57f7\u884c\u8edf\u9ad4\uff0c\u4ee5 Batch mode \u65b9\u5f0f\u5728\u80cc\u666f\u57f7\u884c\uff0c\u4f46\u82e5 R \u7a0b\u5f0f\u4e2d\u67d0\u4e9b\u5730\u65b9\u767c\u751f\u932f\u8aa4\uff0c\u6574\u500b R \u7a0b\u5f0f\u5f80\u5f80\u5c31\u6703\u505c\u5728\u51fa\u932f\u7684\u5730\u65b9\uff0c\u5c0d\u65bc\u5927\u578b\u61c9\u7528\u7a0b\u5f0f\u800c\u8a00\u6703\u9020\u6210\u5f88\u591a\u56f0\u64fe\u3002\u6b64\u6642\uff0cR \u8edf\u9ad4\u7684 tryCatch \u51fd\u6578\u53ef\u4ee5\u5354\u52a9\u5075\u6e2c\u4e26\u89e3\u6c7a R \u7a0b\u5f0f\u9047\u5230\u932f\u8aa4\u6642\u88ab\u5f37\u8feb\u7d42\u6b62\u7684\u554f\u984c\uff0c\u53ef\u8b93\u51fa\u932f\u7a0b\u5f0f\u78bc\u4e0b\u65b9\u5176\u4ed6\u7684\u7a0b\u5f0f\u7e7c\u7e8c\u57f7\u884c\u3002</p>\n<p>\u7db2\u8def\u4e0a\u95dc\u65bc tryCatch \u51fd\u6578\u7684\u4f8b\u5b50\u901a\u5e38\u90fd\u5beb\u5f97\u5f88\u56c9\u5506\u3001\u8a9e\u7109\u4e0d\u8a73\uff0c\u6240\u4ee5\u6211\u5728\u9019\u88e1\u63d0\u4f9b\u5e7e\u500b\u7c21\u55ae\u7684\u61c9\u7528\u7bc4\u4f8b\u3002</p>\n<p><span id=\"more-887\"></span><br />\n\u5047\u8a2d\u6211\u5011\u6709\u4e00\u500b R \u7a0b\u5f0f\u6a94: d:/try1.R , \u5167\u5bb9\u5982\u4e0b\uff1a</p>\n<p><code><span style=\"color: #0000ff;\">x = \"-1\"</span><br />\n<span style=\"color: #0000ff;\">sqrt(x)</span><br />\n<span style=\"color: #0000ff;\">y = x</span><br />\n<span style=\"color: #0000ff;\">y</span><br />\n</code></p>\n<p>\u5728 R \u8edf\u9ad4 GUI \u4e2d\u57f7\u884c\u8a72\u7a0b\u5f0f\u6a94:<br />\n<code><br />\n<span style=\"color: #993300;\"><strong>&gt; source(\"d:/try1.R\",echo=TRUE)</strong></span><br />\n<span style=\"color: #993300;\"><strong>&gt; x = \"-1\"</strong></span><br />\n<span style=\"color: #993300;\"><strong>&gt; sqrt(x)</strong></span><br />\nError in sqrt(x) : non-numeric argument to mathematical function</code></p>\n<p>\u6211\u5011\u53ef\u4ee5\u770b\u5230\uff0c\u7a0b\u5f0f\u57f7\u884c\u5230\u7b2c 2 \u884c\u6642\uff0c\u5c31\u56e0\u70ba\u767c\u751f\u932f\u8aa4\u800c\u505c\u6b62\uff0c\u4ee5\u81f4\u65bc\u5e95\u4e0b\u7684 y = x \u8207 y \u90fd\u6c92\u6709\u88ab\u57f7\u884c.</p>\n<p>\u5982\u679c\u6211\u5011\u628a try1.R \u4e2d\u7684 x = &#8220;-1&#8221; \u6539\u6210 x = -1 \uff0c\u518d\u7528 source \u51fd\u6578\u57f7\u884c\u4e00\u6b21\uff0c\u5247 output \u6703\u662f\u9019\u6a23\uff1a</p>\n<p><span style=\"font-family: arial, helvetica, sans-serif; color: #993300;\"><strong><code>&gt; x = -1</code></strong></span><br />\n<span style=\"font-family: arial, helvetica, sans-serif; color: #993300;\"> <strong> <code>&gt; sqrt(x)</code></strong></span><br />\n<code>[1] NaN</code><br />\n<span style=\"font-family: arial, helvetica, sans-serif; color: #993300;\"><strong><code>&gt; y = x</code></strong></span><br />\n<span style=\"color: #993300;\"> <strong><code>&gt; y</code></strong></span><br />\n<code>[1] -1</code><br />\n<code>Warning message:</code><br />\n<code>In sqrt(x) : \u7522\u751f\u4e86 NaNs</code></p>\n<p>\u9019\u6642\u5019\u53ea\u6703\u7522\u751f Warning(\u8b66\u544a), \u6240\u4ee5\u7a0b\u5f0f\u6c92\u6709\u4e2d\u65b7\uff0cy = x \u8207 y \u90fd\u6709\u88ab\u57f7\u884c\u3002</p>\n<p>\u63a5\u4e0b\u4f86\u7684 try2.R , \u5c31\u662f\u63a1\u7528 tryCatch \u51fd\u6578\u540c\u6642\u8655\u7406 warning \u8207 error \u7684\u72c0\u6cc1\uff1a</p>\n<p><span style=\"color: #0000ff;\"><code>tryCatch({</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0x = \"-1\"  </code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0z = sqrt(x)</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0},</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0# \u9047\u5230 warning \u6642\u7684\u81ea\u8a02\u8655\u7406\u51fd\u6578</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0warning = function(msg) {</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 message(\"Original warning message:\")</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 message(paste0(msg,\"\\n\"))</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return(NULL)</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0},</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0# \u9047\u5230 error \u6642\u7684\u81ea\u8a02\u8655\u7406\u51fd\u6578</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0error = function(msg) {</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 message(\"Original error message:\")</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 message(paste0(msg,\"\\n\"))</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return(NA)</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0}</code></span><br />\n<span style=\"color: #0000ff;\"> <code>)\u00a0</code></span><br />\n<span style=\"color: #0000ff;\"> <code>ifelse(exists(\"z\"),z,\"z does not exist!\")</code></span><br />\n<span style=\"color: #0000ff;\"> <code>y = x</code></span><br />\n<span style=\"color: #0000ff;\"> <code>y</code></span></p>\n<p>\u5728 R \u8edf\u9ad4 GUI \u4e2d\u57f7\u884c\u8a72\u7a0b\u5f0f\u6a94:<br />\n<span style=\"color: #993300;\"><strong><code>&gt; source(\"d:/try2.R\",echo=TRUE)</code></strong></span></p>\n<p>\u53ef\u4ee5\u5f97\u5230\u4ee5\u4e0b output:</p>\n<p><code>Original error message:</code><br />\n<code> Error in sqrt(x): non-numeric argument to mathematical function</code></p>\n<p><code>[1] NA</code></p>\n<p><span style=\"color: #993300;\"><strong><code>&gt; ifelse(exists(\"z\"),z,\"z does not exist!\")</code></strong></span><br />\n<code> [1] \"z does not exist!\"</code><br />\n<span style=\"color: #993300;\"><strong><code>&gt; y = x</code></strong></span><br />\n<span style=\"color: #993300;\"> <strong> <code>&gt; y</code></strong></span><br />\n<code> [1] \"-1\"</code></p>\n<p>\u6211\u5011\u53ef\u4ee5\u770b\u5230\uff0c\u96d6\u7136\u767c\u751f\u932f\u8aa4\uff0c\u4f46 R \u7a0b\u5f0f\u9084\u662f\u7e7c\u7e8c\u57f7\u884c\uff0c\u4e26\u6c92\u6709\u56e0\u6b64\u800c\u4e2d\u65b7\u3002</p>\n<p>\u5982\u679c\u6211\u5011\u628a try2.R \u4e2d\u7684 x = &#8220;-1&#8221; \u6539\u6210 x = -1, \u518d\u7528 source \u57f7\u884c\u4e00\u6b21\uff0c\u9019\u6b21\u53ea\u6709 warning \u72c0\u6cc1\uff1a</p>\n<p><code>Original warning message:</code><br />\n<code>simpleWarning in sqrt(x): \u7522\u751f\u4e86 NaNs</code><br />\n<code>NULL</code><br />\n<span style=\"color: #993300;\"><strong><code>&gt; ifelse(exists(\"z\"),z,\"z does not exist!\")</code></strong></span><br />\n<code>[1] \"z does not exist!\"</code><br />\n<span style=\"color: #993300;\"><strong><code>&gt; y = x</code></strong></span><br />\n<span style=\"color: #993300;\"> <strong> <code>&gt; y</code></strong></span><br />\n<code>[1] -1</code></p>\n<p>\u6700\u5f8c\uff0c\u82e5\u6211\u5011\u628a try2.R \u4e2d\u7684 x = -1 \u518d\u6539\u6210 x = 4, \u7528 source \u57f7\u884c\uff0c\u5c31\u662f\u6b63\u5e38\u672a\u51fa\u932f\u7684\u72c0\u6cc1\uff1a</p>\n<p><span style=\"color: #993300;\"><strong><code>&gt; ifelse(exists(\"z\"),z,\"z does not exist!\")</code></strong></span><br />\n<code>[1] 2 # z \u8b8a\u6578\u7684\u503c</code><br />\n<span style=\"color: #993300;\"><strong><code>&gt; y = x</code></strong></span><br />\n<span style=\"color: #993300;\"> <strong> <code> &gt; y</code></strong></span><br />\n<code> [1] 4</code></p>\n<p>\u63a5\u4e0b\u4f86\u6211\u5011\u518d\u4f86\u770b\u7b2c\u4e09\u500b\u4f8b\u5b50 try3.R :</p>\n<p><span style=\"color: #0000ff;\"><code>x = \"-1\"</code></span><br />\n<span style=\"color: #0000ff;\"> <code> z = tryCatch({</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0sqrt(x)</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0},</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0warning = function(msg) {</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 message(\"Original warning message:\")</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 message(paste0(msg,\"\\n\"))</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return(NULL)</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0},</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0error = function(msg) {</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 message(\"Original error message:\")</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 message(paste0(msg,\"\\n\"))</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return(NA)</code></span><br />\n<span style=\"color: #0000ff;\"> <code>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0}</code></span><br />\n<span style=\"color: #0000ff;\"> <code> )</code></span><br />\n<span style=\"color: #0000ff;\"> <code> cat(\"z = \",z,\"\\n\")</code></span><br />\n<span style=\"color: #0000ff;\"> <code> y = x</code></span><br />\n<span style=\"color: #0000ff;\"> <code> y</code></span></p>\n<p>\u7528 source \u57f7\u884c try3.R \u7684 output :</p>\n<p><code>Original error message:</code><br />\n<code> Error in sqrt(x): non-numeric argument to mathematical function</code></p>\n<p><span style=\"color: #993300;\"><strong><code>&gt; cat(\"z = \",z,\"\\n\")</code></strong></span><br />\n<code> z = NA</code><br />\n<span style=\"color: #993300;\"><strong><code>&gt; y = x</code></strong></span><br />\n<span style=\"color: #993300;\"><strong><code> &gt; y</code></strong></span><br />\n<code> [1] \"-1\"</code></p>\n<p>\u518d\u628a try3.R \u4e2d\u7684 x = &#8220;-1&#8221; \u6539\u6210 x = -1, output \u5982\u4e0b\uff1a</p>\n<p><code>Original warning message:</code><br />\n<code>simpleWarning in sqrt(x): \u7522\u751f\u4e86 NaNs</code><br />\n<span style=\"color: #993300;\"><strong><code>&gt; cat(\"z = \",z,\"\\n\")</code></strong></span><br />\n<code>z =</code><br />\n<span style=\"color: #993300;\"><strong><code>&gt; y = x</code></strong></span><br />\n<span style=\"color: #993300;\"><strong><code>&gt; y</code></strong></span><br />\n<code>[1] -1</code><br />\n<span style=\"color: #993300;\"><strong><code>&gt; is.null(z) # \u984d\u5916\u8f38\u5165\u6307\u4ee4\u6aa2\u67e5 z \u8b8a\u6578\u5167\u5bb9</code></strong></span><br />\n<code>[1] TRUE</code></p>\n<p>&nbsp;</p>", "<p>\u5728 PTT R_Language \u7248\u6709\u4e00\u7bc7 2015 \u5e74\u7684\u6587\u7ae0\u300c<a href=\"https://www.ptt.cc/bbs/R_Language/M.1437916508.A.C27.html\" target=\"_blank\" rel=\"noopener noreferrer\">[\u5fc3\u5f97] \u9810\u5206\u914d\u8a18\u61b6\u9ad4\u7684\u5dee\u7570</a>\u300d\uff0c\u6bd4\u8f03\u4e86 R \u8ff4\u5708\u6642 List \u8b8a\u6578\u662f\u5426\u9810\u5206\u914d\u8a18\u61b6\u9ad4\u7684\u8a08\u7b97\u901f\u5ea6\u5dee\u7570\u3002\u4f5c\u8005\u4f7f\u7528\u7684 R \u7248\u672c\u662f Revolution R Open 3.2.0\uff0c\u7d50\u8ad6\u662f\u901f\u5ea6\u76f8\u5dee 60 \u500d\u3002\u4f46\u6700\u8fd1\u5e7e\u5e74 R \u6539\u7248\u5e45\u5ea6\u8b8a\u5316\u5f88\u5927\uff0c\u570b\u5916\u6709\u4e00\u4e9b\u65b0\u7684\u8aaa\u6cd5\u51fa\u73fe\uff0c\u8a8d\u70ba List \u8b8a\u6578\u7684\u8a18\u61b6\u9ad4\u672c\u4f86\u5c31\u4e0d\u662f\u9023\u7e8c\u914d\u7f6e\uff0c\u6240\u4ee5\u5728\u6bcf\u500b\u8ff4\u5708\u4e2d\u9010\u6b21\u589e\u52a0 List \u8b8a\u6578\u5143\u7d20\uff0c\u5728\u8a08\u7b97\u901f\u5ea6\u7684\u5f71\u97ff\u4e0d\u5927\u3002</p>\n<p>\u4ee5\u4e0b\u662f\u6211\u628a\u8a72\u6587\u6e2c\u8a66 R \u7a0b\u5f0f\u7528\u5e7e\u500b\u8f03\u65b0 R \u7248\u672c\u6e2c\u8a66\u7684\u7d50\u679c</p>\n<p><span id=\"more-960\"></span></p>\n<p>\u5148\u770b\u7d50\u679c\u3002\u5e95\u4e0b\u8868\u683c\u662f List \u8b8a\u6578\u5728\u8ff4\u5708\u4e4b\u524d\u662f\u5426\u4f5c\u300c\u8a18\u61b6\u9ad4\u9810\u5206\u914d\u300d\u7684\u8a08\u7b97\u6642\u9593\u6bd4\u8f03\u3002PRO 3.2.0 \u662f\u6307 Revolution R \u516c\u53f8\u5c1a\u672a\u8ce3\u7d66\u5fae\u8edf\u4e4b\u524d\u7684 Community \u7248\u672c\uff0c\u5df2\u7d93\u6709\u4e00\u4e9b\u5411\u91cf\u77e9\u9663\u5e73\u884c\u904b\u7b97\u7684\u529f\u80fd\uff1a</p>\n<p><img src=\"http://steve-chen.tw/wp-content/uploads/2018/06/List_pre.jpg\" alt=\"\" width=\"445\" height=\"479\" /></p>\n<p>&nbsp;</p>\n<p>\u5f9e\u4e0a\u8868\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c\u76f8\u8f03\u65bc PRO 3.2.0 \u8207 R 3.3.2\uff0c\u5728 R 3.4.0 \u7248(\u542b)\u4e4b\u5f8c\uff0c\u7531\u65bc\u5167\u5efa JIT \u81ea\u52d5\u7de8\u8b6f\uff0c\u662f\u5426\u4f5c\u8a18\u61b6\u9ad4\u9810\u5206\u914d\u7684\u5dee\u7570\u5df2\u7d93\u4e0d\u662f\u5f88\u5927\u3002</p>\n<p>\u63a5\u4e0b\u4f86\u662f\u5411\u91cf (Vector) \u5728\u8ff4\u5708\u4e4b\u524d\u662f\u5426\u4f5c\u8a18\u61b6\u9ad4\u9810\u5206\u914d\u7684\u8a08\u7b97\u6642\u9593\u6bd4\u8f03\uff1a</p>\n<p><img src=\"http://steve-chen.tw/wp-content/uploads/2018/06/Vector_pre.jpg\" alt=\"\" width=\"440\" height=\"295\" /></p>\n<p>&nbsp;</p>\n<p>\u4e0a\u8868\u53ef\u4ee5\u770b\u51fa\uff1a\u5728\u8ff4\u5708\u4e4b\u524d\u6709\u4f5c\u8a18\u61b6\u9ad4\u9810\u5206\u914d\u7684\u5411\u91cf\u8a08\u7b97\u7a0b\u5f0f\u7684\u78ba\u5feb\u5f88\u591a\uff0c\u800c\u4e14\u5728 R 3.4.0 \u7248(\u542b) \u4e4b\u5f8c\uff0c\u901f\u5ea6\u7684\u63d0\u5347\u975e\u5e38\u986f\u8457\uff0c\u5f9e PRO 3.2.0 \u7684 53 \u500d\u5dee\u8ddd\uff0c\u63d0\u5347\u5230 452 \u500d\u3001460 \u500d\u7684\u5dee\u8ddd\u3002</p>\n<p><span style=\"font-size: 14pt;\"><strong>\u9644\u8a3b\uff1a</strong></span></p>\n<p>\u6e2c\u8a66\u7a0b\u5f0f\u6cbf\u7528 2015 \u5e74 PTT \u6587\u7ae0\u7684\u7a0b\u5f0f\uff0c\u50c5\u505a functions \u540d\u7a31\u7684\u4fee\u6539</p>\n<p>List \u8b8a\u6578\uff1a</p>\n<p><code>L_NO &lt;- function(){</code><br />\n<code>\u00a0 \u00a0 a &lt;- list()</code><br />\n<code>\u00a0 \u00a0 for (i in 1:1e6){ a[[i]] &lt;- rnorm(10) }</code><br />\n<code>}</code></p>\n<p><code>L_pre &lt;- function(){</code><br />\n<code>\u00a0 \u00a0 a &lt;- vector('list', 1e6)</code><br />\n<code>\u00a0 \u00a0 for (i in 1:1e6){ a[[i]] &lt;- rnorm(10) }</code><br />\n<code>}</code><br />\n<code>library(rbenchmark)</code><br />\n<code>benchmark(L_NO(), L_pre(),</code><br />\n<code> columns = c(\"test\", \"replications\", \"elapsed\", \"relative\"),</code><br />\n<code> order = \"relative\", replications = 20)</code></p>\n<p>Vector \u8b8a\u6578\uff1a</p>\n<p><code>V_NO &lt;- function(){</code><br />\n<code>\u00a0 MaxIter = 1e5</code><br />\n<code>\u00a0 x = c()</code><br />\n<code>\u00a0 i = 0</code><br />\n<code>\u00a0 while (i &lt; MaxIter){</code><br />\n<code>\u00a0 \u00a0 i &lt;- i + 1</code><br />\n<code>\u00a0 \u00a0 x &lt;- c(x, i)</code><br />\n<code>\u00a0 \u00a0 if (i &gt; 5e4)</code><br />\n<code>\u00a0 \u00a0 \u00a0 break</code><br />\n<code>\u00a0 }</code><br />\n<code>\u00a0 x</code><br />\n<code>}</code></p>\n<p><code>V_pre &lt;- function(){</code><br />\n<code>\u00a0 MaxIter = 1e5</code><br />\n<code>\u00a0 x = rep(NA_real_, MaxIter)\u00a0</code><br />\n<code>\u00a0 for (i in 1:MaxIter) {</code><br />\n<code>\u00a0 \u00a0 x[i] &lt;- i</code><br />\n<code>\u00a0 \u00a0 if (i &gt; 5e4)</code><br />\n<code>\u00a0 \u00a0 \u00a0 break</code><br />\n<code>\u00a0 }</code><br />\n<code>\u00a0 (x = x[!is.na(x)])</code><br />\n<code>}</code></p>\n<p><code>library(rbenchmark)</code><br />\n<code>benchmark(V_NO(), V_pre(),</code><br />\n<code> columns = c(\"test\", \"replications\", \"elapsed\", \"relative\"),</code><br />\n<code> order = \"relative\", replications = 20)</code></p>\n<p>&nbsp;</p>"]}